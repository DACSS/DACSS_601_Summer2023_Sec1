<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Zhongyue Lin">
<meta name="dcterms.date" content="2023-06-22">
<meta name="description" content="Summarize statistics and visualize project data sets - World Happiness Data">

<title>HW3_World Happiness Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<meta name="twitter:title" content="HW3_World Happiness Data">
<meta name="twitter:description" content="Summarize statistics and visualize project data sets - World Happiness Data">
<meta name="twitter:image" content="https://dacss.github.io/DACSS_601_Summer2023_Sec1/posts/Homework_3_Zhongyue_Lin_files/figure-html/unnamed-chunk-13-1.png">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:site" content="@UMassDACSS">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/UMass White Wordmark Horiz.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://dacss.github.io/DACSS_601_Summer2023_Sec1/" rel="" target="">
 <span class="menu-text">Summer 2023 Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">Contributors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss" rel="" target="">
 <span class="menu-text">DACSS</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://dacss.github.io/DACSS_601_Summer2023_Sec1/" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#hw2" id="toc-hw2" class="nav-link active" data-scroll-target="#hw2">HW2</a>
  <ul class="collapse">
  <li><a href="#definition-and-measurement-of-happiness" id="toc-definition-and-measurement-of-happiness" class="nav-link" data-scroll-target="#definition-and-measurement-of-happiness">Definition and measurement of happiness</a></li>
  <li><a href="#dataset-description" id="toc-dataset-description" class="nav-link" data-scroll-target="#dataset-description">Dataset Description</a></li>
  <li><a href="#data-cleaning-and-sorting" id="toc-data-cleaning-and-sorting" class="nav-link" data-scroll-target="#data-cleaning-and-sorting">Data cleaning and sorting</a></li>
  <li><a href="#for-this-dataset-the-research-questions" id="toc-for-this-dataset-the-research-questions" class="nav-link" data-scroll-target="#for-this-dataset-the-research-questions">For this dataset the research questions</a></li>
  </ul></li>
  <li><a href="#hw3" id="toc-hw3" class="nav-link" data-scroll-target="#hw3">HW3</a>
  <ul class="collapse">
  <li><a href="#descriptive-statistics" id="toc-descriptive-statistics" class="nav-link" data-scroll-target="#descriptive-statistics">Descriptive Statistics</a></li>
  <li><a href="#visualizations-using-ggplot2" id="toc-visualizations-using-ggplot2" class="nav-link" data-scroll-target="#visualizations-using-ggplot2">Visualizations using ggplot2</a></li>
  <li><a href="#grouping-and-summarizing" id="toc-grouping-and-summarizing" class="nav-link" data-scroll-target="#grouping-and-summarizing">Grouping and summarizing</a></li>
  <li><a href="#limitations-of-visualizations" id="toc-limitations-of-visualizations" class="nav-link" data-scroll-target="#limitations-of-visualizations">Limitations of visualizations</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">HW3_World Happiness Data</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">HW_3</div>
    <div class="quarto-category">Zhongyue Lin</div>
    <div class="quarto-category">Happiness</div>
  </div>
  </div>

<div>
  <div class="description">
    Summarize statistics and visualize project data sets - World Happiness Data
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Zhongyue Lin </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 22, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="hw2" class="level2">
<h2 class="anchored" data-anchor-id="hw2">HW2</h2>
<section id="definition-and-measurement-of-happiness" class="level3">
<h3 class="anchored" data-anchor-id="definition-and-measurement-of-happiness">Definition and measurement of happiness</h3>
<p>Happiness, a deeply personal and subjective experience, is often defined as a state of well-being and contentment, characterized by the presence of positive emotions and the absence of negative ones. The measurement of happiness is a complex task due to its highly subjective nature, necessitating an interdisciplinary approach. The World Happiness Report, an annual survey that assesses happiness levels across 153 countries globally, is a prime example of this approach.</p>
<p>Psychology contributes to our understanding of happiness, particularly in the use of the World Happiness Report’s data, by exploring emotions, cognitions, and behaviors. It emphasizes factors such as social support and freedom to make life choices, both key elements examined in the report. Similarly, behavioral economics, which explores how individual decision-making impacts happiness, is reflected in the report’s inclusion of GDP per capita and perceptions of corruption as potential influences on happiness.</p>
<p>Sociology and political science provide broader perspectives on how societal structures and governance impact happiness, offering context to the varying happiness levels between countries. Moreover, insights from neuroscience help us comprehend the physiological basis of happiness, illuminating why certain factors in the report, such as generosity or a healthy life expectancy, might elicit positive emotional responses.</p>
<p>The World Happiness Report, in its extensive data collection and analysis, embodies the interdisciplinary approach to defining and measuring happiness. It draws from various academic disciplines, such as psychology, behavioral economics, sociology, political science, and neuroscience, providing a comprehensive understanding of happiness on a global scale. By analyzing factors like GDP per capita, social support, freedom to make life choices, generosity, perceptions of corruption, and more, the report offers a robust tool for exploring the multi-faceted nature of happiness.</p>
</section>
<section id="dataset-description" class="level3">
<h3 class="anchored" data-anchor-id="dataset-description">Dataset Description</h3>
<p>This dataset is from the World Happiness Report up to 2022 on the Kaggle platform <a href="https://www.kaggle.com/datasets/mathurinache/world-happiness-report" class="uri">https://www.kaggle.com/datasets/mathurinache/world-happiness-report</a></p>
<p>The World Happiness Report is an annual survey that evaluates the sense of happiness in 153 countries globally. The dataset of this report typically includes the happiness score of each country, along with various factors used to explain that score. These factors include: GDP per capita, healthy life expectancy, social support, freedom to make life choices, generosity, and perceptions of corruption. In addition, there is an indicator named “dystopia residual” that is used to compare the worst possible life in every aspect.</p>
<p>The report uses data from the Gallup World Poll to calculate happiness ratings and rankings. Based on responses to the survey, the results are calculated. One tool used is the Cantril ladder, a questionnaire that asks respondents to rank their current lives on a scale from 0 to 10, with 10 representing the best possible life they can imagine and 0 representing the worst possible existence. The responses from citizens are then averaged to obtain the happiness score for the country. Countries around the world are ranked in descending order of happiness. The World Happiness Report uses several key measures to evaluate the sense of happiness in each country:</p>
<ol type="1">
<li><p><strong>GDP per Capital</strong>: This is the measure of a country’s economic output that accounts for its number of people. It serves as an indicator of the standard of living and economic prosperity. A higher GDP usually signifies better living conditions and opportunities, contributing to the happiness of the citizens.</p></li>
<li><p><strong>Healthy Life Expectancy</strong>: This measure indicates the average lifespan of people in a country in a physically and mentally healthy state. It reflects people’s health status and their expectations of longevity, which significantly impact their sense of happiness.</p></li>
<li><p><strong>Social Support</strong>: This factor represents whether individuals feel they have someone to rely on during tough times. It could include friends, family, or community members. Strong social support networks contribute positively to individuals’ sense of happiness.</p></li>
<li><p><strong>Freedom to Make Life Choices</strong>: This factor evaluates the extent to which individuals feel they have the liberty to make key life decisions. The ability to choose how to live one’s life freely is essential to the overall sense of satisfaction and happiness.</p></li>
<li><p><strong>Generosity</strong>: This measure determines the extent to which people in a country are willing to help others. Acts of generosity can enhance an individual’s sense of happiness and contribute to stronger community ties.</p></li>
<li><p><strong>Perceptions of Corruption</strong>: This measure examines how corrupt individuals perceive their government and private sector to be. High levels of perceived corruption can lead to lower trust in societal systems, negatively impacting the happiness of citizens.</p></li>
<li><p><strong>Dystopia Residual</strong>: This is a hypothetical measure that represents the worst possible living conditions. It’s used as a benchmark to compare the actual living conditions in each country. It’s essentially the ‘unexplained’ component of happiness, encapsulating any aspects of happiness not covered by the other six factors.</p></li>
</ol>
</section>
<section id="data-cleaning-and-sorting" class="level3">
<h3 class="anchored" data-anchor-id="data-cleaning-and-sorting">Data cleaning and sorting</h3>
<section id="data-reading" class="level4">
<h4 class="anchored" data-anchor-id="data-reading">Data Reading</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the years you want to read in</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="dv">2015</span><span class="sc">:</span><span class="dv">2022</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the years</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (year <span class="cf">in</span> years) {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define the path to the csv file</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  file_path <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"_data/Happiness_Zhongyue_Lin/"</span>, year, <span class="st">".csv"</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the csv file</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(file_path)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the year to the data frame</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(df, <span class="at">Year =</span> year)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define the variable name</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  var_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Happy_"</span>, year)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Assign the data frame to the variable name in the global environment</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(var_name, df, <span class="at">envir =</span> .GlobalEnv)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print the head and structure of the data frame</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">head</span>(df))</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The logic of this code is to read happiness index datasets from 2015 to 2022 and assign each dataset to a corresponding variable name based on the year. First, a vector is defined to include the years from 2015 to 2022. Then, through a loop, the code constructs the file path for each dataset and uses the <code>read_csv()</code> function to read the dataset, storing it in a variable named df.</p>
<p>Next, the code uses the <code>mutate()</code> function to add a new column named “Year” to the dataset, with the value set to the current year in the loop. The code also constructs a variable name based on the current year and uses the <code>assign()</code> function to assign the dataset to that variable name in the global environment.</p>
<p>Finally, the code prints the first few rows of each dataset to examine the data’s contents.</p>
<p>Through this loop, the code reads each dataset for each year, adds a new column for the year, and assigns the dataset to the corresponding variable name in the global environment. This allows each dataset for each year to be accessible and the first few rows can be printed to review the dataset’s contents.</p>
</section>
<section id="data-cleaning" class="level4">
<h4 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate rank for Happy_2020</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> Happy_2020 <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Rank =</span> <span class="fu">rank</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Ladder score</span><span class="st">`</span>)))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate rank for Happy_2021</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> Happy_2021 <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Rank =</span> <span class="fu">rank</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Ladder score</span><span class="st">`</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to rename rank column</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>rename_rank_column <span class="ot">&lt;-</span> <span class="cf">function</span>(df, old_name) {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Rank =</span> old_name)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to all dataframes</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2015, <span class="st">'Happiness Rank'</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2016, <span class="st">'Happiness Rank'</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2017, <span class="st">'Happiness.Rank'</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>Happy_2018 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2018, <span class="st">'Overall rank'</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>Happy_2019 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2019, <span class="st">'Overall rank'</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2020, <span class="st">'Rank'</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2021, <span class="st">'Rank'</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2022, <span class="st">'RANK'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to rename country column</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>rename_country_column <span class="ot">&lt;-</span> <span class="cf">function</span>(df, old_name) {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Country =</span> old_name)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to all dataframes</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2015, <span class="st">'Country'</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2016, <span class="st">'Country'</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2017, <span class="st">'Country'</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>Happy_2018 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2018, <span class="st">'Country or region'</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>Happy_2019 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2019, <span class="st">'Country or region'</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2020, <span class="st">'Country name'</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2021, <span class="st">'Country name'</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2022, <span class="st">'Country'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to rename score column</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>rename_score_column <span class="ot">&lt;-</span> <span class="cf">function</span>(df, old_name) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Score =</span> old_name)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to all dataframes</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2015, <span class="st">'Happiness Score'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2016, <span class="st">'Happiness Score'</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2017, <span class="st">'Happiness.Score'</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2020, <span class="st">'Ladder score'</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2021, <span class="st">'Ladder score'</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2022, <span class="st">'Happiness score'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> Happy_2022 <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">'Dystopia (1.83) + residual'</span>, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: GDP per capita'</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: Healthy life expectancy'</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: Freedom to make life choices'</span>,<span class="st">'Explained by: Social support'</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: Generosity'</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: Perceptions of corruption'</span>), <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, .))),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>         <span class="fu">across</span>(<span class="sc">-</span>Country, as.numeric))</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> Happy_2022 <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"Score"</span>, <span class="st">"Whisker-high"</span>, <span class="st">"Whisker-low"</span>), <span class="sc">~</span> . <span class="sc">/</span> <span class="dv">1000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to rename multiple columns</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>rename_columns <span class="ot">&lt;-</span> <span class="cf">function</span>(df, old_names, new_names) {</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_at</span>(<span class="fu">vars</span>(old_names), <span class="sc">~</span> new_names)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Define new names</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"GDP_per_Capita"</span>, <span class="st">"Family"</span>, <span class="st">"Life_Expectancy"</span>, <span class="st">"Freedom"</span>, </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Generosity"</span>, <span class="st">"Government_Corruption"</span>, <span class="st">"Dystopia_Residual"</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to all dataframes</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2015, </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"Economy (GDP per Capita)"</span>, <span class="st">"Family"</span>, <span class="st">"Health (Life Expectancy)"</span>, </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom"</span>, <span class="st">"Generosity"</span>, <span class="st">"Trust (Government Corruption)"</span>, <span class="st">"Dystopia Residual"</span>), </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                             new_names)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2016, </span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"Economy (GDP per Capita)"</span>, <span class="st">"Family"</span>, <span class="st">"Health (Life Expectancy)"</span>, </span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom"</span>, <span class="st">"Generosity"</span>, <span class="st">"Trust (Government Corruption)"</span>, <span class="st">"Dystopia Residual"</span>), </span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>                             new_names)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2017, </span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"Economy..GDP.per.Capita."</span>, <span class="st">"Family"</span>, <span class="st">"Health..Life.Expectancy."</span>, </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom"</span>, <span class="st">"Generosity"</span>, <span class="st">"Trust..Government.Corruption."</span>, <span class="st">"Dystopia.Residual"</span>), </span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>                             new_names)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>Happy_2018 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2018, </span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"GDP per capita"</span>, <span class="st">"Social support"</span>, <span class="st">"Healthy life expectancy"</span>, </span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom to make life choices"</span>, <span class="st">"Generosity"</span>, <span class="st">"Perceptions of corruption"</span>), </span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>                             new_names[<span class="sc">-</span><span class="fu">length</span>(new_names)])</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>Happy_2019 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2019, </span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"GDP per capita"</span>, <span class="st">"Social support"</span>, <span class="st">"Healthy life expectancy"</span>, </span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom to make life choices"</span>, <span class="st">"Generosity"</span>, <span class="st">"Perceptions of corruption"</span>), </span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>                             new_names[<span class="sc">-</span><span class="fu">length</span>(new_names)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>old_names_2020_to_2021 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Explained by: Log GDP per capita"</span>, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Social support"</span>, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Healthy life expectancy"</span>, </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Freedom to make life choices"</span>, </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Generosity"</span>, </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Perceptions of corruption"</span>, </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Dystopia + residual"</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>old_names_2022 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Explained by: GDP per capita"</span>, </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Social support"</span>, </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Healthy life expectancy"</span>, </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Freedom to make life choices"</span>, </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Generosity"</span>, </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Perceptions of corruption"</span>, </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Dystopia (1.83) + residual"</span>)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to drop a column if it exists</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>drop_column_if_exists <span class="ot">&lt;-</span> <span class="cf">function</span>(df, column_name) {</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (column_name <span class="sc">%in%</span> <span class="fu">colnames</span>(df)) {</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>column_name)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop original 'Generosity' column if it exists in Happy_2020 and Happy_2021 datasets</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">drop_column_if_exists</span>(Happy_2020, <span class="st">'Generosity'</span>)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">drop_column_if_exists</span>(Happy_2021, <span class="st">'Generosity'</span>)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Then proceed with the renaming process</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2020, old_names_2020_to_2021, new_names)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2021, old_names_2020_to_2021, new_names)</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2022, old_names_2022, new_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of datasets</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> <span class="fu">list</span>(Happy_2015, Happy_2016, Happy_2017, Happy_2018, Happy_2019, Happy_2020, Happy_2021, Happy_2022)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply glimpse() function to each dataset in the list</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(datasets, head)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In the data cleaning stage, I standardized the format of the datasets from 2015 to 2022. This was done to eliminate differences between the datasets and ensure consistent structure and variable names. This process has several benefits for subsequent data analysis.</p>
<p>By standardizing the format of the datasets, I ensured that the data had consistent structure and variable names across different years. This makes the data easier to understand and compare, reducing confusion and errors that can arise from varying naming conventions and structures.</p>
<p>Additionally, standardizing the format enhances reproducibility. Once the cleaning and renaming rules are defined, future datasets can be processed using the same rules, eliminating the need for repetitive work. This improves efficiency and reduces the likelihood of errors.</p>
<p>Using consistent variable names improves readability. Descriptive and clear variable names make it easier for others to understand the content of the dataset and facilitate my own analysis and reporting in subsequent stages.</p>
<p>Standardizing the format also benefits data analysis. Consistent data formats make it easier to aggregate, filter, visualize, and model the data across multiple years without the need for different processing steps for each dataset. This provides a more efficient and streamlined data analysis process.</p>
<p>In conclusion, by standardizing the format of the datasets from 2015 to 2022, I ensured consistency, reproducibility, and readability of the data, while improving the efficiency and accuracy of data analysis. This establishes a solid foundation for subsequent data exploration, analysis, and interpretation.</p>
</section>
<section id="data-integration" class="level4">
<h4 class="anchored" data-anchor-id="data-integration">Data Integration</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> Happy_2015 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> Happy_2016 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> Happy_2017 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>Happy_2018 <span class="ot">&lt;-</span> Happy_2018 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>Happy_2019 <span class="ot">&lt;-</span> Happy_2019 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> Happy_2020 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> Happy_2021 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> Happy_2022 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>needed_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Year"</span>, <span class="st">"Score"</span>, <span class="st">"Rank"</span>, <span class="st">"GDP_per_Capita"</span>, <span class="st">"Family"</span>, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Life_Expectancy"</span>, <span class="st">"Freedom"</span>, <span class="st">"Generosity"</span>, <span class="st">"Government_Corruption"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to select a specific column</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>select_columns <span class="ot">&lt;-</span> <span class="cf">function</span>(df, columns) {</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(columns))</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>Happy_2015_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2015, needed_columns)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>Happy_2016_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2016, needed_columns)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>Happy_2017_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2017, needed_columns)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>Happy_2018_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2018, needed_columns)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>Happy_2019_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2019, needed_columns)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>Happy_2020_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2020, needed_columns)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>Happy_2021_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2021, needed_columns)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>Happy_2022_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2022, needed_columns)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, combine all the selected data boxes together</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>all_years_selected <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(Happy_2015_selected, Happy_2016_selected, Happy_2017_selected,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>                                Happy_2018_selected, Happy_2019_selected, Happy_2020_selected,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>                                Happy_2021_selected, Happy_2022_selected)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>all_years_selected <span class="ot">&lt;-</span> all_years_selected <span class="sc">%&gt;%</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Rank =</span> <span class="fu">as.integer</span>(Rank))</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove * from Country names</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">*"</span>, <span class="st">""</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace 'Trinidad &amp; Tobago' with 'Trinidad and Tobago'</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Trinidad &amp; Tobago"</span>, <span class="st">"Trinidad and Tobago"</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace 'Taiwan Province of China' with 'Taiwan'</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Taiwan Province of China"</span>, <span class="st">"Taiwan"</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace 'Hong Kong S.A.R. of China' and 'Hong Kong S.A.R., China' with 'Hong Kong'</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Hong Kong S.A.R. of China"</span>, <span class="st">"Hong Kong"</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Hong Kong S.A.R., China"</span>, <span class="st">"Hong Kong"</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(all_years_selected)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Score"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Rank"],"name":[4],"type":["int"],"align":["right"]},{"label":["GDP_per_Capita"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Family"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Life_Expectancy"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Freedom"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Generosity"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Government_Corruption"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"Switzerland","2":"2015","3":"7.587","4":"1","5":"1.39651","6":"1.34951","7":"0.94143","8":"0.66557","9":"0.29678","10":"0.41978"},{"1":"Iceland","2":"2015","3":"7.561","4":"2","5":"1.30232","6":"1.40223","7":"0.94784","8":"0.62877","9":"0.43630","10":"0.14145"},{"1":"Denmark","2":"2015","3":"7.527","4":"3","5":"1.32548","6":"1.36058","7":"0.87464","8":"0.64938","9":"0.34139","10":"0.48357"},{"1":"Norway","2":"2015","3":"7.522","4":"4","5":"1.45900","6":"1.33095","7":"0.88521","8":"0.66973","9":"0.34699","10":"0.36503"},{"1":"Canada","2":"2015","3":"7.427","4":"5","5":"1.32629","6":"1.32261","7":"0.90563","8":"0.63297","9":"0.45811","10":"0.32957"},{"1":"Finland","2":"2015","3":"7.406","4":"6","5":"1.29025","6":"1.31826","7":"0.88911","8":"0.64169","9":"0.23351","10":"0.41372"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="data-set-visualization-test" class="level4">
<h4 class="anchored" data-anchor-id="data-set-visualization-test">Data set visualization test</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for Japan</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>japan_data <span class="ot">&lt;-</span> all_years_selected <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Japan"</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot rank over time</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(japan_data, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Rank)) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Ranking of Japan from 2015 to 2022"</span>) <span class="sc">+</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Rank"</span>) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>() <span class="co"># Reverse the y axis as rank 1 is the highest</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Homework_3_Zhongyue_Lin_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="for-this-dataset-the-research-questions" class="level3">
<h3 class="anchored" data-anchor-id="for-this-dataset-the-research-questions">For this dataset the research questions</h3>
<p>The World Happiness Report’s dataset offers a wealth of information that can help address numerous research questions related to national happiness levels and the factors that influence them. Here’s a more detailed look at the potential research questions mentioned:</p>
<ol type="1">
<li><p><strong>Which factors most significantly influence a country’s happiness?</strong> This question seeks to determine the primary drivers of happiness on a national scale. Are economic factors like GDP per capita more influential, or do social factors such as social support and freedom to make life choices hold more weight? Additionally, to what extent does a nation’s perception of corruption impact the overall happiness? Analyzing correlations and conducting regression analysis could shed light on these relationships.</p></li>
<li><p><strong>How does happiness differ among countries?</strong> This question explores the disparities in happiness levels across various nations. Which countries consistently rank at the top, and which ones at the bottom? Are there discernible patterns geographically, economically, or culturally? Comparing and analyzing the happiness scores and their respective factors across different countries can provide insights.</p></li>
<li><p><strong>How do various factors and overall happiness evolve over time?</strong> This question addresses the temporal dynamics of happiness and its influencing factors. Are there trends showing that certain factors become more or less influential over time? Does the overall happiness level of countries or the world at large rise, fall, or remain stable? Time series analysis could be useful in this context.</p></li>
<li><p><strong>How does a specific factor impact happiness?</strong> This question focuses on the relationship between a single factor and happiness. For instance, how does a rise in GDP per capita or a decrease in perceived corruption affect the happiness score? Understanding this can help pinpoint what initiatives might be most effective in increasing a country’s happiness. Conducting detailed analysis for individual factors and their impact on the happiness score would be required to address this question.</p></li>
</ol>
<p>By meticulously examining these questions using the dataset, researchers can gain valuable insights into the complex dynamics of happiness, potentially guiding policy decisions and initiatives aimed at enhancing national well-being.</p>
</section>
</section>
<section id="hw3" class="level2">
<h2 class="anchored" data-anchor-id="hw3">HW3</h2>
<p>In Homework 2, I carried out several critical tasks related to data preparation, analysis, and visualization. Here’s a summary:</p>
<ol type="1">
<li><p><strong>Data Cleaning</strong>: Firstly, I standardized multiple datasets spanning from 2015 to 2022. This process involved converting the <code>Government_Corruption</code> variable into a numeric format for all the years. This step ensured that the data across all years was consistent and comparable.</p></li>
<li><p><strong>Data Integration</strong>: After cleaning the data, I selected a specific set of columns from all the datasets that I deemed necessary for my analysis. This included variables such as “Country”, “Year”, “Score”, “Rank”, “GDP_per_Capita”, “Family”, “Life_Expectancy”, “Freedom”, “Generosity”, and “Government_Corruption”. I then amalgamated all these selected data subsets from the different years into one unified dataset for further analysis.</p></li>
<li><p><strong>Data Visualization</strong>: I then conducted a preliminary visualization using ggplot2 to test the dataset. In this step, I filtered the data for Japan and graphed its ranking over time from 2015 to 2022.</p></li>
<li><p><strong>Research Questions</strong>: I proposed several research questions concerning national happiness levels and their influencing factors. These questions aimed to explore which factors most significantly influence a country’s happiness, how happiness varies among countries, how various factors and overall happiness evolve over time, and how a specific factor impacts happiness.</p></li>
</ol>
<p>By accomplishing these tasks, I prepared the dataset for an in-depth exploratory data analysis in Homework 3. The integrated and clean dataset, along with the established research questions, provides a solid foundation for further analysis and interpretation.</p>
<section id="descriptive-statistics" class="level3">
<h3 class="anchored" data-anchor-id="descriptive-statistics">Descriptive Statistics</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to compute descriptive statistics</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>compute_descriptive_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var_name) {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(var_name) <span class="co"># turn the variable name into a symbol</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  stats <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">min =</span> <span class="fu">min</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">max =</span> <span class="fu">max</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(stats)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the function for the variables</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>score_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Score)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>gdp_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, GDP_per_Capita)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>family_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Family)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>life_expectancy_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Life_Expectancy)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>freedom_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Freedom)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>generosity_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Generosity)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>gov_corruption_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Government_Corruption)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the results</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"5.430092","2":"5.4105","3":"1.115361","4":"2.404","5":"7.842"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gdp_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.9762546","2":"1.01358","3":"0.4352469","4":"0","5":"2.209"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(family_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"1.032984","2":"1.069168","3":"0.3295257","4":"0","5":"1.644"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(life_expectancy_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.6081325","2":"0.6394266","3":"0.2412486","4":"0","5":"1.141"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(freedom_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.4408327","2":"0.458135","3":"0.1544145","4":"0","5":"0.74"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(generosity_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.2015826","2":"0.1869839","3":"0.1155215","4":"0","5":"0.8380752"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gov_corruption_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.1307559","2":"0.096","3":"0.1108176","4":"0","5":"0.587"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>In this code, I define a function called <code>compute_descriptive_stats</code> to streamline the process of calculating descriptive statistics for any given variable in my dataset. I convert the input variable name to a symbol using <code>enquo</code>, allowing me to use it within the <code>dplyr::summarise</code> function to compute the mean, median, standard deviation, and minimum and maximum values.</p>
<p>I then apply this function to each of the variables of interest in my <code>all_years_selected</code> dataset - namely ‘Score’, ‘GDP_per_Capita’, ‘Family’, ‘Life_Expectancy’, ‘Freedom’, ‘Generosity’, and ‘Government_Corruption’. The computed statistics for each variable are stored in their respective objects.</p>
<p>Finally, I print out the results for each variable, providing me with a concise summary of their key statistical properties. This enables me to quickly understand the distribution and central tendencies of these important variables in my dataset.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to compute descriptive statistics for each country</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>compute_descriptive_stats_by_country <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var_name) {</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(var_name) <span class="co"># turn the variable name into a symbol</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  stats <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean =</span> <span class="fu">mean</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">median =</span> <span class="fu">median</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">sd =</span> <span class="fu">sd</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">min =</span> <span class="fu">min</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">max =</span> <span class="fu">max</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(stats)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the function for the variables</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>score_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Score)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>gdp_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, GDP_per_Capita)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>family_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Family)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>life_expectancy_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Life_Expectancy)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>freedom_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Freedom)</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>generosity_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Generosity)</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>gov_corruption_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Government_Corruption)</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the results</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_stats_by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"3.132237","3":"3.28150","4":"0.5557132","5":"2.404","6":"3.794"},{"1":"Albania","2":"4.845213","3":"4.80085","4":"0.2308911","5":"4.586","6":"5.199"},{"1":"Algeria","2":"5.419012","3":"5.25300","4":"0.4952759","5":"4.887","6":"6.355"},{"1":"Angola","2":"3.872250","3":"3.83050","4":"0.1122716","5":"3.795","6":"4.033"},{"1":"Argentina","2":"6.270962","3":"6.23700","4":"0.3135332","5":"5.929","6":"6.650"},{"1":"Armenia","2":"4.665600","3":"4.46750","4":"0.4352601","5":"4.321","6":"5.399"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gdp_stats_by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"0.4017841","3":"0.360000","4":"0.14772911","5":"0.3007058","6":"0.7580000"},{"1":"Albania","2":"1.0058520","3":"0.951150","4":"0.18040559","5":"0.8786700","6":"1.4390000"},{"1":"Algeria","2":"1.0397088","3":"0.990500","4":"0.14170679","5":"0.9392900","6":"1.3630000"},{"1":"Angola","2":"0.7983795","3":"0.802545","4":"0.06409398","5":"0.7300000","6":"0.8584282"},{"1":"Argentina","2":"1.1672051","3":"1.121685","4":"0.18038112","5":"1.0284656","6":"1.5920000"},{"1":"Armenia","2":"0.9292411","3":"0.855430","4":"0.21527535","5":"0.7682100","6":"1.4340000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(family_stats_by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"0.3006496","3":"0.3296419","4":"0.2395453","5":"0.00000","6":"0.5815433"},{"1":"Albania","2":"0.7225174","3":"0.8040126","4":"0.1422814","5":"0.50163","6":"0.8480000"},{"1":"Algeria","2":"1.0311289","3":"1.1103618","4":"0.1573975","5":"0.76500","6":"1.1600000"},{"1":"Angola","2":"0.9383680","3":"0.9824060","4":"0.2190476","5":"0.66366","6":"1.1250000"},{"1":"Argentina","2":"1.2636681","3":"1.3103868","4":"0.1923765","5":"0.98000","6":"1.4680000"},{"1":"Armenia","2":"0.8833676","3":"0.9050000","4":"0.1590117","5":"0.62477","6":"1.0550000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(life_expectancy_stats_by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"0.2443235","3":"0.2605258","4":"0.07814505","5":"0.12600000","6":"0.361"},{"1":"Albania","2":"0.7687262","3":"0.7605799","4":"0.07557377","5":"0.64600000","6":"0.874"},{"1":"Algeria","2":"0.6582129","3":"0.6305200","4":"0.07646676","5":"0.55200000","6":"0.785"},{"1":"Angola","2":"0.1339022","3":"0.1083700","4":"0.10559669","5":"0.04986867","6":"0.269"},{"1":"Argentina","2":"0.7452813","3":"0.7205550","4":"0.08678959","5":"0.64600000","6":"0.881"},{"1":"Armenia","2":"0.6897640","3":"0.6670000","4":"0.07731606","5":"0.58500000","6":"0.815"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(freedom_stats_by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"0.07370244","3":"0.0425000","4":"0.09012588","5":"0.00000","6":"0.23414"},{"1":"Albania","2":"0.41542932","3":"0.4010000","4":"0.06757431","5":"0.31866","6":"0.51100"},{"1":"Algeria","2":"0.15514120","3":"0.1325000","4":"0.07887146","5":"0.07700","6":"0.28579"},{"1":"Angola","2":"0.02743250","3":"0.0029450","4":"0.05101395","5":"0.00000","6":"0.10384"},{"1":"Argentina","2":"0.50349244","3":"0.5076798","4":"0.05284548","5":"0.42284","6":"0.57000"},{"1":"Armenia","2":"0.31952738","3":"0.2715000","4":"0.15821802","5":"0.14037","6":"0.55800"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(generosity_stats_by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"0.21061071","3":"0.17450000","4":"0.10420704","5":"0.089","6":"0.3651000"},{"1":"Albania","2":"0.16455759","3":"0.16820000","4":"0.02078583","5":"0.138","6":"0.2013129"},{"1":"Algeria","2":"0.08937646","3":"0.07561000","4":"0.03038604","5":"0.055","6":"0.1440000"},{"1":"Angola","2":"0.10526912","3":"0.10931825","4":"0.02091716","5":"0.079","6":"0.1234400"},{"1":"Argentina","2":"0.08524469","3":"0.07555024","4":"0.02227111","5":"0.062","6":"0.1145100"},{"1":"Armenia","2":"0.08152423","3":"0.07877500","4":"0.01536326","5":"0.054","6":"0.1072257"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gov_corruption_stats_by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"0.03833670","3":"0.03050000","4":"0.034916454","5":"0.001225785","6":"0.09719"},{"1":"Albania","2":"0.03667069","3":"0.03000000","4":"0.014687958","5":"0.024000000","6":"0.06413"},{"1":"Algeria","2":"0.14121085","3":"0.14054806","4":"0.020539193","5":"0.114000000","6":"0.17383"},{"1":"Angola","2":"0.07157008","3":"0.07047017","4":"0.009632265","5":"0.061000000","6":"0.08434"},{"1":"Argentina","2":"0.06674437","3":"0.06370753","4":"0.013262919","5":"0.050000000","6":"0.08500"},{"1":"Armenia","2":"0.08830658","3":"0.05150000","4":"0.075861363","5":"0.026674422","6":"0.21000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Grouping data by country before calculating the statistics will give me more detailed insights. It allows me to understand country-specific trends, make direct comparisons, prepare for further statistical testing, and create more informative visualizations. While the overall statistics provide a broad overview, the per-country statistics will enable me to dive deeper into the data, which will be immensely helpful for my further analysis.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to compute frequency for categorical variables</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>compute_frequency <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var_name) {</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(var_name) <span class="co"># turn the variable name into a symbol</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  var_str <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">as_name</span>(var) <span class="co"># convert the quosure to a string</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  freq <span class="ot">&lt;-</span> <span class="fu">table</span>(data[[var_str]])</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(freq)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the table to a data frame</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>country_freq_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(all_years_selected<span class="sc">$</span>Country))</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the columns</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(country_freq_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the data frame</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(country_freq_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Country"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Frequency"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"8","_rn_":"1"},{"1":"Albania","2":"8","_rn_":"2"},{"1":"Algeria","2":"8","_rn_":"3"},{"1":"Angola","2":"4","_rn_":"4"},{"1":"Argentina","2":"8","_rn_":"5"},{"1":"Armenia","2":"8","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>In this code, I define and apply a function <code>compute_frequency</code> that calculates the frequency of each country in the <code>all_years_selected</code> dataset. I start by converting the variable name into a symbol, then change it back into a string to access the column in the dataframe. I compute the frequency of each unique value in the specified column and store the result in <code>freq</code>. After applying this function to the <code>Country</code> column, I convert the resulting frequency table into a dataframe, name the columns as “Country” and “Frequency”, and then print this dataframe. This process helps to get an overview of the country representation in the dataset.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the data</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>countries_with_frequency_8 <span class="ot">&lt;-</span> country_freq_df <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Frequency <span class="sc">==</span> <span class="dv">8</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(countries_with_frequency_8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Country"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Frequency"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"8","_rn_":"1"},{"1":"Albania","2":"8","_rn_":"2"},{"1":"Algeria","2":"8","_rn_":"3"},{"1":"Argentina","2":"8","_rn_":"4"},{"1":"Armenia","2":"8","_rn_":"5"},{"1":"Australia","2":"8","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the original dataset</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>selected_countries_data <span class="ot">&lt;-</span> all_years_selected <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> countries_with_frequency_8<span class="sc">$</span>Country)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(selected_countries_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Score"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Rank"],"name":[4],"type":["int"],"align":["right"]},{"label":["GDP_per_Capita"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Family"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Life_Expectancy"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Freedom"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Generosity"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Government_Corruption"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"Switzerland","2":"2015","3":"7.587","4":"1","5":"1.39651","6":"1.34951","7":"0.94143","8":"0.66557","9":"0.29678","10":"0.41978"},{"1":"Iceland","2":"2015","3":"7.561","4":"2","5":"1.30232","6":"1.40223","7":"0.94784","8":"0.62877","9":"0.43630","10":"0.14145"},{"1":"Denmark","2":"2015","3":"7.527","4":"3","5":"1.32548","6":"1.36058","7":"0.87464","8":"0.64938","9":"0.34139","10":"0.48357"},{"1":"Norway","2":"2015","3":"7.522","4":"4","5":"1.45900","6":"1.33095","7":"0.88521","8":"0.66973","9":"0.34699","10":"0.36503"},{"1":"Canada","2":"2015","3":"7.427","4":"5","5":"1.32629","6":"1.32261","7":"0.90563","8":"0.63297","9":"0.45811","10":"0.32957"},{"1":"Finland","2":"2015","3":"7.406","4":"6","5":"1.29025","6":"1.31826","7":"0.88911","8":"0.64169","9":"0.23351","10":"0.41372"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>In this code snippet, my goal was to filter the data from the original dataset all_years_selected to obtain records for those countries that have data for all eight years.</p>
<p>Firstly, I filtered rows from the country_freq_df data frame where Frequency is equal to 8, meaning those countries that appear in the dataset 8 times, and stored these country names in countries_with_frequency_8.</p>
<p>Next, I printed out countries_with_frequency_8 to see which countries have data for all 8 years.</p>
<p>Then, I applied the filtering function again, but this time on the all_years_selected dataset, to select all rows for countries that are in the countries_with_frequency_8 list.</p>
<p>Finally, I printed the filtered data selected_countries_data, thus obtaining all data for those countries that have records for all eight years.</p>
<p>This process allowed me to acquire a more accurate and comprehensive dataset, providing a solid foundation for further analysis.</p>
</section>
<section id="visualizations-using-ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="visualizations-using-ggplot2">Visualizations using ggplot2</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the unique countries in selected_countries_data</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>unique_countries <span class="ot">&lt;-</span> <span class="fu">unique</span>(selected_countries_data<span class="sc">$</span>Country)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(unique_countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the continent based on the country</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>selected_countries_data <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Continent =</span> <span class="fu">case_when</span>(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Canada"</span>, <span class="st">"United States"</span>, <span class="st">"Mexico"</span>) <span class="sc">~</span> <span class="st">"North America"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Costa Rica"</span>, <span class="st">"Panama"</span>, <span class="st">"Guatemala"</span>, <span class="st">"El Salvador"</span>, <span class="st">"Honduras"</span>, <span class="st">"Nicaragua"</span>, <span class="st">"Dominican Republic"</span>,<span class="st">"Jamaica"</span>) <span class="sc">~</span> <span class="st">"Central America"</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Brazil"</span>, <span class="st">"Venezuela"</span>, <span class="st">"Chile"</span>, <span class="st">"Argentina"</span>, <span class="st">"Uruguay"</span>, <span class="st">"Colombia"</span>, <span class="st">"Ecuador"</span>, <span class="st">"Bolivia"</span>, <span class="st">"Paraguay"</span>, <span class="st">"Peru"</span>) <span class="sc">~</span> <span class="st">"South America"</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Switzerland"</span>, <span class="st">"Iceland"</span>, <span class="st">"Denmark"</span>, <span class="st">"Norway"</span>, <span class="st">"Finland"</span>, <span class="st">"Netherlands"</span>, <span class="st">"Sweden"</span>, <span class="st">"Austria"</span>, <span class="st">"Luxembourg"</span>, <span class="st">"Ireland"</span>, <span class="st">"Belgium"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"Germany"</span>, <span class="st">"France"</span>, <span class="st">"Spain"</span>, <span class="st">"Malta"</span>, <span class="st">"Italy"</span>, <span class="st">"Moldova"</span>, <span class="st">"Slovakia"</span>, <span class="st">"Slovenia"</span>, <span class="st">"Lithuania"</span>, <span class="st">"Belarus"</span>, <span class="st">"Poland"</span>, <span class="st">"Croatia"</span>, <span class="st">"Russia"</span>, <span class="st">"Cyprus"</span>, <span class="st">"Kosovo"</span>, <span class="st">"Estonia"</span>, <span class="st">"Latvia"</span>, <span class="st">"Albania"</span>, <span class="st">"Bosnia and Herzegovina"</span>, <span class="st">"Greece"</span>, <span class="st">"Hungary"</span>, <span class="st">"Portugal"</span>, <span class="st">"Romania"</span>, <span class="st">"Serbia"</span>, <span class="st">"Bulgaria"</span>, <span class="st">"Ukraine"</span>, <span class="st">"Armenia"</span>, <span class="st">"Georgia"</span>,<span class="st">"Montenegro"</span>) <span class="sc">~</span> <span class="st">"Europe"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Israel"</span>, <span class="st">"United Arab Emirates"</span>, <span class="st">"Saudi Arabia"</span>, <span class="st">"Kuwait"</span>, <span class="st">"Bahrain"</span>, <span class="st">"Jordan"</span>, <span class="st">"Lebanon"</span>, <span class="st">"Iran"</span>, <span class="st">"Iraq"</span>) <span class="sc">~</span> <span class="st">"Middle East"</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"New Zealand"</span>, <span class="st">"Australia"</span>, <span class="st">"Singapore"</span>, <span class="st">"Japan"</span>, <span class="st">"South Korea"</span>, <span class="st">"Taiwan"</span>, <span class="st">"Uzbekistan"</span>, <span class="st">"Malaysia"</span>, <span class="st">"Thailand"</span>, <span class="st">"Vietnam"</span>, <span class="st">"Indonesia"</span>, <span class="st">"Hong Kong"</span>, <span class="st">"China"</span>, <span class="st">"Kazakhstan"</span>, <span class="st">"Pakistan"</span>, <span class="st">"Turkmenistan"</span>, <span class="st">"Azerbaijan"</span>, <span class="st">"Philippines"</span>, <span class="st">"India"</span>, <span class="st">"Mongolia"</span>, <span class="st">"Bangladesh"</span>, <span class="st">"Nepal"</span>, <span class="st">"Myanmar"</span>, <span class="st">"Cambodia"</span>, <span class="st">"Sri Lanka"</span>,<span class="st">"Kyrgyzstan"</span>,<span class="st">"Tajikistan"</span>,<span class="st">"Yemen"</span>,<span class="st">"Afghanistan"</span>,<span class="st">"Turkey"</span>) <span class="sc">~</span> <span class="st">"Asia"</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Mauritius"</span>, <span class="st">"Libya"</span>, <span class="st">"Algeria"</span>, <span class="st">"Nigeria"</span>, <span class="st">"Morocco"</span>, <span class="st">"Zimbabwe"</span>, <span class="st">"Ghana"</span>, <span class="st">"Zambia"</span>, <span class="st">"Kenya"</span>, <span class="st">"Egypt"</span>, <span class="st">"South Africa"</span>, <span class="st">"Ethiopia"</span>, <span class="st">"Sierra Leone"</span>, <span class="st">"Cameroon"</span>, <span class="st">"Malawi"</span>, <span class="st">"Gabon"</span>, <span class="st">"Senegal"</span>, <span class="st">"Niger"</span>, <span class="st">"Uganda"</span>, <span class="st">"Liberia"</span>, <span class="st">"Tanzania"</span>, <span class="st">"Madagascar"</span>, <span class="st">"Guinea"</span>, <span class="st">"Ivory Coast"</span>, <span class="st">"Burkina Faso"</span>, <span class="st">"Benin"</span>, <span class="st">"Mali"</span>, <span class="st">"Chad"</span>, <span class="st">"Rwanda"</span>, <span class="st">"Togo"</span>,<span class="st">"Tunisia"</span>,<span class="st">"Mauritania"</span>,<span class="st">"Botswana"</span>,<span class="st">"Palestinian Territories"</span>) <span class="sc">~</span> <span class="st">"Africa"</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span>  <span class="co"># Default value for countries not listed</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(selected_countries_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Score"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Rank"],"name":[4],"type":["int"],"align":["right"]},{"label":["GDP_per_Capita"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Family"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Life_Expectancy"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Freedom"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Generosity"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Government_Corruption"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["Continent"],"name":[11],"type":["chr"],"align":["left"]}],"data":[{"1":"Switzerland","2":"2015","3":"7.587","4":"1","5":"1.39651","6":"1.34951","7":"0.94143","8":"0.66557","9":"0.29678","10":"0.41978","11":"Europe"},{"1":"Iceland","2":"2015","3":"7.561","4":"2","5":"1.30232","6":"1.40223","7":"0.94784","8":"0.62877","9":"0.43630","10":"0.14145","11":"Europe"},{"1":"Denmark","2":"2015","3":"7.527","4":"3","5":"1.32548","6":"1.36058","7":"0.87464","8":"0.64938","9":"0.34139","10":"0.48357","11":"Europe"},{"1":"Norway","2":"2015","3":"7.522","4":"4","5":"1.45900","6":"1.33095","7":"0.88521","8":"0.66973","9":"0.34699","10":"0.36503","11":"Europe"},{"1":"Canada","2":"2015","3":"7.427","4":"5","5":"1.32629","6":"1.32261","7":"0.90563","8":"0.63297","9":"0.45811","10":"0.32957","11":"North America"},{"1":"Finland","2":"2015","3":"7.406","4":"6","5":"1.29025","6":"1.31826","7":"0.88911","8":"0.64169","9":"0.23351","10":"0.41372","11":"Europe"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>The first code snippet prints all the unique countries from the <code>selected_countries_data</code> dataframe. The <code>unique()</code> function identifies all unique elements from the given vector (in this case, the ‘Country’ column). The <code>print</code> function then prints these unique countries.</p>
<p>The second snippet creates a new column named ‘Continent’ in the <code>selected_countries_data</code> dataframe. The <code>mutate()</code> function adds or modifies columns in a dataframe, and the <code>case_when()</code> function assigns each country to a continent based on a set of conditions. If a country does not fit any condition, it is classified as ‘Other’. The <code>head()</code> function is then used to view the first few rows of the dataframe to ensure that the ‘Continent’ column has been added correctly.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>selected_countries_data <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Developed =</span> <span class="fu">case_when</span>(</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Canada"</span>, <span class="st">"United States"</span>,  <span class="co"># North America</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Switzerland"</span>, <span class="st">"Iceland"</span>, <span class="st">"Denmark"</span>, <span class="st">"Norway"</span>, <span class="st">"Finland"</span>, <span class="st">"Netherlands"</span>, <span class="st">"Sweden"</span>, <span class="st">"Austria"</span>, <span class="st">"Luxembourg"</span>, <span class="st">"Ireland"</span>, <span class="st">"Belgium"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"Germany"</span>, <span class="st">"France"</span>, <span class="st">"Spain"</span>, <span class="st">"Malta"</span>, <span class="st">"Italy"</span>,  <span class="co"># Europe</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Israel"</span>, <span class="st">"United Arab Emirates"</span>, <span class="st">"Saudi Arabia"</span>, <span class="st">"Kuwait"</span>, <span class="st">"Bahrain"</span>,  <span class="co"># Middle East</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"New Zealand"</span>, <span class="st">"Australia"</span>, <span class="st">"Singapore"</span>, <span class="st">"Japan"</span>, <span class="st">"South Korea"</span>, <span class="st">"Taiwan"</span>, <span class="st">"Hong Kong"</span>  <span class="co"># Asia</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">~</span> <span class="st">"Developed"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Developing"</span>  <span class="co"># Default value for countries not listed</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(selected_countries_data )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Score"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Rank"],"name":[4],"type":["int"],"align":["right"]},{"label":["GDP_per_Capita"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Family"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Life_Expectancy"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Freedom"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Generosity"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Government_Corruption"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["Continent"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Developed"],"name":[12],"type":["chr"],"align":["left"]}],"data":[{"1":"Switzerland","2":"2015","3":"7.587","4":"1","5":"1.39651","6":"1.34951","7":"0.94143","8":"0.66557","9":"0.29678","10":"0.41978","11":"Europe","12":"Developed"},{"1":"Iceland","2":"2015","3":"7.561","4":"2","5":"1.30232","6":"1.40223","7":"0.94784","8":"0.62877","9":"0.43630","10":"0.14145","11":"Europe","12":"Developed"},{"1":"Denmark","2":"2015","3":"7.527","4":"3","5":"1.32548","6":"1.36058","7":"0.87464","8":"0.64938","9":"0.34139","10":"0.48357","11":"Europe","12":"Developed"},{"1":"Norway","2":"2015","3":"7.522","4":"4","5":"1.45900","6":"1.33095","7":"0.88521","8":"0.66973","9":"0.34699","10":"0.36503","11":"Europe","12":"Developed"},{"1":"Canada","2":"2015","3":"7.427","4":"5","5":"1.32629","6":"1.32261","7":"0.90563","8":"0.63297","9":"0.45811","10":"0.32957","11":"North America","12":"Developed"},{"1":"Finland","2":"2015","3":"7.406","4":"6","5":"1.29025","6":"1.31826","7":"0.88911","8":"0.64169","9":"0.23351","10":"0.41372","11":"Europe","12":"Developed"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>In this block of code, I’m creating a new column named “Developed” in the data frame to label each country as developed or developing based on the definitions provided by <strong>J. A. (2018, March 2) in “Developed and Developing Countries: World Bank Classification | Economics.” </strong></p>
<p>I have a list of countries which are defined as developed in that source. So, if a country is in my list, I label it as “Developed”. For all other countries that are not in my list, I label them as “Developing”. This classification is based on economic indicators and classifications commonly used by international organizations like the World Bank.</p>
<p>Finally, I print out the first few rows of the data frame to inspect the changes I’ve made.</p>
<p><code>GDP per Capita</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(selected_countries_data, <span class="fu">aes</span>(<span class="at">x =</span> GDP_per_Capita, <span class="at">y =</span> Score, <span class="at">colour =</span> Continent, <span class="at">shape =</span> Developed)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP per Capita"</span>, <span class="at">y =</span> <span class="st">"Happiness Score"</span>, <span class="at">title =</span> <span class="st">"Happiness Score vs GDP per Capita"</span>) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Homework_3_Zhongyue_Lin_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><code>Life Expectancy</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting Life_Expectancy against Score</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(selected_countries_data, <span class="fu">aes</span>(<span class="at">x =</span> Life_Expectancy, <span class="at">y =</span> Score, <span class="at">color =</span> Continent,<span class="at">shape =</span> Developed)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Life Expectancy"</span>, <span class="at">y =</span> <span class="st">"Happiness Score"</span>, <span class="at">title =</span> <span class="st">"Happiness Score vs Life Expectancy"</span>)<span class="sc">+</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Homework_3_Zhongyue_Lin_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>These two chunks of code create scatter plots. The first one plots GDP per Capita against Happiness Score, and the second one plots Life Expectancy against Happiness Score. The data is split into facets for each year using <code>facet_wrap(~ Year)</code>. The color of the points represents the continent (color = Continent), and the shape represents whether the country is developed (<code>shape = Developed</code>). The <code>labs()</code> function labels the axes and titles the plots.</p>
<p><code>US_Data</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming the rank column is named as 'Rank'</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>us_data <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, Score, GDP_per_Capita, Life_Expectancy, Generosity, Family, Freedom, Government_Corruption, Rank)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert data to long format</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>us_data_long <span class="ot">&lt;-</span> us_data <span class="sc">%&gt;%</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(Year, Score, Rank), <span class="at">names_to =</span> <span class="st">"Variable"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(us_data_long, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Value, <span class="at">color =</span> Variable)) <span class="sc">+</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Variable <span class="sc">~</span> ., <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Value"</span>, <span class="at">title =</span> <span class="st">"Comparison of Variables and Rank Over Time in the United States"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Homework_3_Zhongyue_Lin_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding rank data</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(us_data, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Rank)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Rank"</span>, <span class="at">title =</span> <span class="st">"Rank Over Time in the United States"</span>) <span class="sc">+</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>()  <span class="co"># Use this if a lower rank is better</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Homework_3_Zhongyue_Lin_files/figure-html/unnamed-chunk-23-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Firstly, I selected the U.S. data and variables of interest, including Year, Score, GDP_per_Capita, Life_Expectancy, Generosity, Family, Freedom, Government_Corruption, and Rank.</p>
<p>Then, I reshaped the data from a wide to long format to facilitate plotting with ggplot. In this process, I kept the Year, Score, and Rank columns fixed, while reshaping other columns into a new ‘Variable’ column with corresponding values in a ‘Value’ column. This made it easier to plot multiple variables’ changes on one graph.</p>
<p>Next, I created a line plot with ggplot, with Year on the x-axis, values of variables on the y-axis, and different colors representing different variables. I used the <code>facet_grid</code> function to split different variables into different panels, allowing each to have its own y-axis scale, as these variables could range greatly. Titles and axis labels were added for clarity.</p>
<p>Finally, I created another line plot to specifically show the change in the U.S. rank over time. I used the <code>scale_y_reverse</code> function to reverse the y-axis, as lower values (closer to 1) represent better ranks in this context.</p>
<p>Through these plots, I could observe the changes in these variables for the U.S. and how these changes could influence its happiness ranking over time.</p>
</section>
<section id="grouping-and-summarizing" class="level3">
<h3 class="anchored" data-anchor-id="grouping-and-summarizing">Grouping and summarizing</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>score_summary_by_country <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_score =</span> <span class="fu">median</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_score =</span> <span class="fu">min</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_score =</span> <span class="fu">max</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_score =</span> <span class="fu">sum</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_summary_by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["count"],"name":[2],"type":["int"],"align":["right"]},{"label":["mean_score"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["median_score"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min_score"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max_score"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["total_score"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"8","3":"3.132237","4":"3.28150","5":"2.404","6":"3.794","7":"25.0579"},{"1":"Albania","2":"8","3":"4.845213","4":"4.80085","5":"4.586","6":"5.199","7":"38.7617"},{"1":"Algeria","2":"8","3":"5.419012","4":"5.25300","5":"4.887","6":"6.355","7":"43.3521"},{"1":"Argentina","2":"8","3":"6.270962","4":"6.23700","5":"5.929","6":"6.650","7":"50.1677"},{"1":"Armenia","2":"8","3":"4.665600","4":"4.46750","5":"4.321","6":"5.399","7":"37.3248"},{"1":"Australia","2":"8","3":"7.243600","4":"7.25000","5":"7.162","6":"7.313","7":"57.9488"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>When summarizing the data, it provides a comprehensive understanding of the dataset, allowing us to view the data from various angles. In this script, I calculated the mean, median, minimum, maximum, and total happiness scores for each country. These summary statistics help us understand the trend in the happiness index across different years for each country.</p>
<p>In addition, I counted the number of appearances for each country in the dataset, which can inform us about the volume of data available for analyzing each country. This is valuable for our subsequent analyses. If a country has very little data, we might need to be cautious about the results of its analysis, as a small amount of data might lead to increased uncertainty in the results.</p>
<p>Overall, this code lays a thorough foundation for subsequent data analyses, aiding in more accurate and efficient analysis.</p>
<p><code>Understanding trends</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating mean score by country and year</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>score_trend <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_score =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_trend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["mean_score"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"2015","3":"3.5750"},{"1":"Afghanistan","2":"2016","3":"3.3600"},{"1":"Afghanistan","2":"2017","3":"3.7940"},{"1":"Afghanistan","2":"2018","3":"3.6320"},{"1":"Afghanistan","2":"2019","3":"3.2030"},{"1":"Afghanistan","2":"2020","3":"2.5669"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Here, I am calculating the mean score of happiness for each country for every year in the dataset. This will help me understand how happiness trends have changed over time for each country.</p>
<p><code>Finding extremes</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Finding the min and max score for each country</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>score_extremes <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min_score =</span> <span class="fu">min</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">max_score =</span> <span class="fu">max</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_extremes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["min_score"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["max_score"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"2.404","3":"3.794"},{"1":"Albania","2":"4.586","3":"5.199"},{"1":"Algeria","2":"4.887","3":"6.355"},{"1":"Argentina","2":"5.929","3":"6.650"},{"1":"Armenia","2":"4.321","3":"5.399"},{"1":"Australia","2":"7.162","3":"7.313"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>In this code, I’m determining the minimum and maximum happiness scores for each country over the years in the dataset. This can highlight the best and worst years for each country in terms of happiness.</p>
<p><code>Analyzing variable relationships</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating mean values of the variables</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>variable_means <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_gdp =</span> <span class="fu">mean</span>(GDP_per_Capita, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_life_expectancy =</span> <span class="fu">mean</span>(Life_Expectancy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_generosity =</span> <span class="fu">mean</span>(Generosity, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(variable_means)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean_score"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["mean_gdp"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["mean_life_expectancy"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["mean_generosity"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"3.132237","3":"0.4017841","4":"0.2443235","5":"0.21061071"},{"1":"Albania","2":"4.845213","3":"1.0058520","4":"0.7687262","5":"0.16455759"},{"1":"Algeria","2":"5.419012","3":"1.0397088","4":"0.6582129","5":"0.08937646"},{"1":"Argentina","2":"6.270962","3":"1.1672051","4":"0.7452813","5":"0.08524469"},{"1":"Armenia","2":"4.665600","3":"0.9292411","4":"0.6897640","5":"0.08152423"},{"1":"Australia","2":"7.243600","3":"1.4547277","4":"0.8960318","5":"0.36929536"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>With this code, I calculate the mean values of some variables like GDP per Capita, Life Expectancy, and Generosity for each country. This helps me to understand the average values of these factors, which can be helpful in identifying relationships between these variables and happiness scores.</p>
<p><code>Analyzing distribution</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating quartiles of the happiness scores</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>score_distribution <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1_score =</span> <span class="fu">quantile</span>(Score, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_score =</span> <span class="fu">median</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3_score =</span> <span class="fu">quantile</span>(Score, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_distribution)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["q1_score"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median_score"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["q3_score"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"2.555925","3":"3.28150","4":"3.58925"},{"1":"Albania","2":"4.652250","3":"4.80085","4":"4.99850"},{"1":"Algeria","2":"5.092775","3":"5.25300","4":"5.67175"},{"1":"Argentina","2":"5.972775","3":"6.23700","4":"6.58025"},{"1":"Armenia","2":"4.357500","3":"4.46750","4":"4.82835"},{"1":"Australia","2":"7.212850","3":"7.25000","4":"7.28400"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Here, I calculate the first quartile (Q1), median, and third quartile (Q3) of the happiness scores for each country. These statistics can give a sense of the distribution of happiness scores within each country.</p>
<p><code>Discovering patterns</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparing the mean scores of developed and developing countries</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>development_score_comparison <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Developed) <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_score =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(development_score_comparison)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Developed"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean_score"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Developed","2":"6.839321"},{"1":"Developing","2":"5.133386"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Finally, in this code, I’m comparing the mean happiness scores of developed and developing countries. This can help identify patterns or differences in happiness based on the level of a country’s development.</p>
</section>
<section id="limitations-of-visualizations" class="level3">
<h3 class="anchored" data-anchor-id="limitations-of-visualizations">Limitations of visualizations</h3>
<p>The limitations of my visualizations primarily lie in the following aspects:</p>
<ol type="1">
<li><p>Temporal dynamics: While my scatterplot shows the relationship between GDP per capita and happiness score, it does not reveal how this relationship changes over time. To improve this, I could create separate scatterplots for data from different years, or use color to distinguish different years in a single scatterplot.</p></li>
<li><p>Regional variations: Even though I used color to differentiate different continents, the detailed variations among continents or specific regions are not sufficiently revealed. For instance, I could create scatterplots for different continents, or visualize regional variations more intuitively by mapping the data onto a geographical map.</p></li>
<li><p>Interaction of multiple variables: While I took multiple variables into account, I did not delve into the interactions among these variables. For example, life expectancy might be associated with GDP per capita and could also be influenced by other variables. In future projects, I could explore these interactions by introducing interaction terms or creating more complex models.</p></li>
<li><p>Correlation and causation: While my visualizations show the relationships among variables, they cannot determine whether these relationships represent causal effects. In future projects, I might need more sophisticated statistical methods or experimental designs to explore potential causal relationships.</p></li>
</ol>
<p>These are all directions to consider and improve upon for the final project.</p>
<p><strong>Reference</strong></p>
<p>Sustainable Development Solutions Network. (2023). World Happiness Report. Worldhappiness.report. <a href="https://worldhappiness.report/" class="uri">https://worldhappiness.report/</a></p>
<p>J, A. (2018, March 2). Developed and Developing Countries: World Bank Classification | Economics. Economics Discussion. <a href="https://www.economicsdiscussion.net/economic-development/developed-and-developing-countries-world-bank-classification-economics/30010" class="uri">https://www.economicsdiscussion.net/economic-development/developed-and-developing-countries-world-bank-classification-economics/30010</a></p>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/SummerCommentRepo" data-repo-id="R_kgDOJrwrQw" data-category="Announcements" data-category-id="DIC_kwDOJrwrQ84CW_wq" data-mapping="url" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb44" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "HW3_World Happiness Data"</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Zhongyue Lin"</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "Summarize statistics and visualize project data sets - World Happiness Data"</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "6/22/2023"</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: paged</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="co">  - HW_3</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - Zhongyue Lin</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co">  - Happiness</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>)</span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a><span class="fu">## HW2</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a><span class="fu">### Definition and measurement of happiness</span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>Happiness, a deeply personal and subjective experience, is often defined as a state of well-being and contentment, characterized by the presence of positive emotions and the absence of negative ones. The measurement of happiness is a complex task due to its highly subjective nature, necessitating an interdisciplinary approach. The World Happiness Report, an annual survey that assesses happiness levels across 153 countries globally, is a prime example of this approach.</span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>Psychology contributes to our understanding of happiness, particularly in the use of the World Happiness Report's data, by exploring emotions, cognitions, and behaviors. It emphasizes factors such as social support and freedom to make life choices, both key elements examined in the report. Similarly, behavioral economics, which explores how individual decision-making impacts happiness, is reflected in the report's inclusion of GDP per capita and perceptions of corruption as potential influences on happiness.</span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>Sociology and political science provide broader perspectives on how societal structures and governance impact happiness, offering context to the varying happiness levels between countries. Moreover, insights from neuroscience help us comprehend the physiological basis of happiness, illuminating why certain factors in the report, such as generosity or a healthy life expectancy, might elicit positive emotional responses.</span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>The World Happiness Report, in its extensive data collection and analysis, embodies the interdisciplinary approach to defining and measuring happiness. It draws from various academic disciplines, such as psychology, behavioral economics, sociology, political science, and neuroscience, providing a comprehensive understanding of happiness on a global scale. By analyzing factors like GDP per capita, social support, freedom to make life choices, generosity, perceptions of corruption, and more, the report offers a robust tool for exploring the multi-faceted nature of happiness.</span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a><span class="fu">### Dataset Description</span></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a>This dataset is from the World Happiness Report up to 2022 on the Kaggle platform <span class="ot">&lt;https://www.kaggle.com/datasets/mathurinache/world-happiness-report&gt;</span></span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>The World Happiness Report is an annual survey that evaluates the sense of happiness in 153 countries globally. The dataset of this report typically includes the happiness score of each country, along with various factors used to explain that score. These factors include: GDP per capita, healthy life expectancy, social support, freedom to make life choices, generosity, and perceptions of corruption. In addition, there is an indicator named "dystopia residual" that is used to compare the worst possible life in every aspect.</span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>The report uses data from the Gallup World Poll to calculate happiness ratings and rankings. Based on responses to the survey, the results are calculated. One tool used is the Cantril ladder, a questionnaire that asks respondents to rank their current lives on a scale from 0 to 10, with 10 representing the best possible life they can imagine and 0 representing the worst possible existence. The responses from citizens are then averaged to obtain the happiness score for the country. Countries around the world are ranked in descending order of happiness. The World Happiness Report uses several key measures to evaluate the sense of happiness in each country:</span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**GDP per Capital**: This is the measure of a country's economic output that accounts for its number of people. It serves as an indicator of the standard of living and economic prosperity. A higher GDP usually signifies better living conditions and opportunities, contributing to the happiness of the citizens.</span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Healthy Life Expectancy**: This measure indicates the average lifespan of people in a country in a physically and mentally healthy state. It reflects people's health status and their expectations of longevity, which significantly impact their sense of happiness.</span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Social Support**: This factor represents whether individuals feel they have someone to rely on during tough times. It could include friends, family, or community members. Strong social support networks contribute positively to individuals' sense of happiness.</span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Freedom to Make Life Choices**: This factor evaluates the extent to which individuals feel they have the liberty to make key life decisions. The ability to choose how to live one's life freely is essential to the overall sense of satisfaction and happiness.</span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>**Generosity**: This measure determines the extent to which people in a country are willing to help others. Acts of generosity can enhance an individual's sense of happiness and contribute to stronger community ties.</span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a><span class="ss">6.  </span>**Perceptions of Corruption**: This measure examines how corrupt individuals perceive their government and private sector to be. High levels of perceived corruption can lead to lower trust in societal systems, negatively impacting the happiness of citizens.</span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a><span class="ss">7.  </span>**Dystopia Residual**: This is a hypothetical measure that represents the worst possible living conditions. It's used as a benchmark to compare the actual living conditions in each country. It's essentially the 'unexplained' component of happiness, encapsulating any aspects of happiness not covered by the other six factors.</span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data cleaning and sorting</span></span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-69"><a href="#cb44-69" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Data Reading</span></span>
<span id="cb44-70"><a href="#cb44-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-71"><a href="#cb44-71" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-72"><a href="#cb44-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the years you want to read in</span></span>
<span id="cb44-73"><a href="#cb44-73" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="dv">2015</span><span class="sc">:</span><span class="dv">2022</span></span>
<span id="cb44-74"><a href="#cb44-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-75"><a href="#cb44-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the years</span></span>
<span id="cb44-76"><a href="#cb44-76" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (year <span class="cf">in</span> years) {</span>
<span id="cb44-77"><a href="#cb44-77" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-78"><a href="#cb44-78" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define the path to the csv file</span></span>
<span id="cb44-79"><a href="#cb44-79" aria-hidden="true" tabindex="-1"></a>  file_path <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"_data/Happiness_Zhongyue_Lin/"</span>, year, <span class="st">".csv"</span>)</span>
<span id="cb44-80"><a href="#cb44-80" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-81"><a href="#cb44-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the csv file</span></span>
<span id="cb44-82"><a href="#cb44-82" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(file_path)</span>
<span id="cb44-83"><a href="#cb44-83" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-84"><a href="#cb44-84" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the year to the data frame</span></span>
<span id="cb44-85"><a href="#cb44-85" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(df, <span class="at">Year =</span> year)</span>
<span id="cb44-86"><a href="#cb44-86" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-87"><a href="#cb44-87" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define the variable name</span></span>
<span id="cb44-88"><a href="#cb44-88" aria-hidden="true" tabindex="-1"></a>  var_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Happy_"</span>, year)</span>
<span id="cb44-89"><a href="#cb44-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-90"><a href="#cb44-90" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Assign the data frame to the variable name in the global environment</span></span>
<span id="cb44-91"><a href="#cb44-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign</span>(var_name, df, <span class="at">envir =</span> .GlobalEnv)</span>
<span id="cb44-92"><a href="#cb44-92" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-93"><a href="#cb44-93" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print the head and structure of the data frame</span></span>
<span id="cb44-94"><a href="#cb44-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">head</span>(df))</span>
<span id="cb44-95"><a href="#cb44-95" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-96"><a href="#cb44-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-97"><a href="#cb44-97" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-98"><a href="#cb44-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-99"><a href="#cb44-99" aria-hidden="true" tabindex="-1"></a>The logic of this code is to read happiness index datasets from 2015 to 2022 and assign each dataset to a corresponding variable name based on the year. First, a vector is defined to include the years from 2015 to 2022. Then, through a loop, the code constructs the file path for each dataset and uses the <span class="in">`read_csv()`</span> function to read the dataset, storing it in a variable named df.</span>
<span id="cb44-100"><a href="#cb44-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-101"><a href="#cb44-101" aria-hidden="true" tabindex="-1"></a>Next, the code uses the <span class="in">`mutate()`</span> function to add a new column named "Year" to the dataset, with the value set to the current year in the loop. The code also constructs a variable name based on the current year and uses the <span class="in">`assign()`</span> function to assign the dataset to that variable name in the global environment.</span>
<span id="cb44-102"><a href="#cb44-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-103"><a href="#cb44-103" aria-hidden="true" tabindex="-1"></a>Finally, the code prints the first few rows of each dataset to examine the data's contents.</span>
<span id="cb44-104"><a href="#cb44-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-105"><a href="#cb44-105" aria-hidden="true" tabindex="-1"></a>Through this loop, the code reads each dataset for each year, adds a new column for the year, and assigns the dataset to the corresponding variable name in the global environment. This allows each dataset for each year to be accessible and the first few rows can be printed to review the dataset's contents.</span>
<span id="cb44-106"><a href="#cb44-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-107"><a href="#cb44-107" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Data Cleaning</span></span>
<span id="cb44-108"><a href="#cb44-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-111"><a href="#cb44-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-112"><a href="#cb44-112" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate rank for Happy_2020</span></span>
<span id="cb44-113"><a href="#cb44-113" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> Happy_2020 <span class="sc">%&gt;%</span></span>
<span id="cb44-114"><a href="#cb44-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Rank =</span> <span class="fu">rank</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Ladder score</span><span class="st">`</span>)))</span>
<span id="cb44-115"><a href="#cb44-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-116"><a href="#cb44-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate rank for Happy_2021</span></span>
<span id="cb44-117"><a href="#cb44-117" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> Happy_2021 <span class="sc">%&gt;%</span></span>
<span id="cb44-118"><a href="#cb44-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Rank =</span> <span class="fu">rank</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Ladder score</span><span class="st">`</span>)))</span>
<span id="cb44-119"><a href="#cb44-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-120"><a href="#cb44-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-121"><a href="#cb44-121" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-122"><a href="#cb44-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-123"><a href="#cb44-123" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-124"><a href="#cb44-124" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to rename rank column</span></span>
<span id="cb44-125"><a href="#cb44-125" aria-hidden="true" tabindex="-1"></a>rename_rank_column <span class="ot">&lt;-</span> <span class="cf">function</span>(df, old_name) {</span>
<span id="cb44-126"><a href="#cb44-126" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb44-127"><a href="#cb44-127" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Rank =</span> old_name)</span>
<span id="cb44-128"><a href="#cb44-128" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-129"><a href="#cb44-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-130"><a href="#cb44-130" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to all dataframes</span></span>
<span id="cb44-131"><a href="#cb44-131" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2015, <span class="st">'Happiness Rank'</span>)</span>
<span id="cb44-132"><a href="#cb44-132" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2016, <span class="st">'Happiness Rank'</span>)</span>
<span id="cb44-133"><a href="#cb44-133" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2017, <span class="st">'Happiness.Rank'</span>)</span>
<span id="cb44-134"><a href="#cb44-134" aria-hidden="true" tabindex="-1"></a>Happy_2018 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2018, <span class="st">'Overall rank'</span>)</span>
<span id="cb44-135"><a href="#cb44-135" aria-hidden="true" tabindex="-1"></a>Happy_2019 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2019, <span class="st">'Overall rank'</span>)</span>
<span id="cb44-136"><a href="#cb44-136" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2020, <span class="st">'Rank'</span>)</span>
<span id="cb44-137"><a href="#cb44-137" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2021, <span class="st">'Rank'</span>)</span>
<span id="cb44-138"><a href="#cb44-138" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> <span class="fu">rename_rank_column</span>(Happy_2022, <span class="st">'RANK'</span>)</span>
<span id="cb44-139"><a href="#cb44-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-140"><a href="#cb44-140" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-141"><a href="#cb44-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-142"><a href="#cb44-142" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-143"><a href="#cb44-143" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to rename country column</span></span>
<span id="cb44-144"><a href="#cb44-144" aria-hidden="true" tabindex="-1"></a>rename_country_column <span class="ot">&lt;-</span> <span class="cf">function</span>(df, old_name) {</span>
<span id="cb44-145"><a href="#cb44-145" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb44-146"><a href="#cb44-146" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Country =</span> old_name)</span>
<span id="cb44-147"><a href="#cb44-147" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-148"><a href="#cb44-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-149"><a href="#cb44-149" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to all dataframes</span></span>
<span id="cb44-150"><a href="#cb44-150" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2015, <span class="st">'Country'</span>)</span>
<span id="cb44-151"><a href="#cb44-151" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2016, <span class="st">'Country'</span>)</span>
<span id="cb44-152"><a href="#cb44-152" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2017, <span class="st">'Country'</span>)</span>
<span id="cb44-153"><a href="#cb44-153" aria-hidden="true" tabindex="-1"></a>Happy_2018 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2018, <span class="st">'Country or region'</span>)</span>
<span id="cb44-154"><a href="#cb44-154" aria-hidden="true" tabindex="-1"></a>Happy_2019 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2019, <span class="st">'Country or region'</span>)</span>
<span id="cb44-155"><a href="#cb44-155" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2020, <span class="st">'Country name'</span>)</span>
<span id="cb44-156"><a href="#cb44-156" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2021, <span class="st">'Country name'</span>)</span>
<span id="cb44-157"><a href="#cb44-157" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> <span class="fu">rename_country_column</span>(Happy_2022, <span class="st">'Country'</span>)</span>
<span id="cb44-158"><a href="#cb44-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-159"><a href="#cb44-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-160"><a href="#cb44-160" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-161"><a href="#cb44-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-162"><a href="#cb44-162" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-163"><a href="#cb44-163" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to rename score column</span></span>
<span id="cb44-164"><a href="#cb44-164" aria-hidden="true" tabindex="-1"></a>rename_score_column <span class="ot">&lt;-</span> <span class="cf">function</span>(df, old_name) {</span>
<span id="cb44-165"><a href="#cb44-165" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb44-166"><a href="#cb44-166" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Score =</span> old_name)</span>
<span id="cb44-167"><a href="#cb44-167" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-168"><a href="#cb44-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-169"><a href="#cb44-169" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to all dataframes</span></span>
<span id="cb44-170"><a href="#cb44-170" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2015, <span class="st">'Happiness Score'</span>)</span>
<span id="cb44-171"><a href="#cb44-171" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2016, <span class="st">'Happiness Score'</span>)</span>
<span id="cb44-172"><a href="#cb44-172" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2017, <span class="st">'Happiness.Score'</span>)</span>
<span id="cb44-173"><a href="#cb44-173" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2020, <span class="st">'Ladder score'</span>)</span>
<span id="cb44-174"><a href="#cb44-174" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2021, <span class="st">'Ladder score'</span>)</span>
<span id="cb44-175"><a href="#cb44-175" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> <span class="fu">rename_score_column</span>(Happy_2022, <span class="st">'Happiness score'</span>)</span>
<span id="cb44-176"><a href="#cb44-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-177"><a href="#cb44-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-178"><a href="#cb44-178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-179"><a href="#cb44-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-180"><a href="#cb44-180" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-181"><a href="#cb44-181" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> Happy_2022 <span class="sc">%&gt;%</span></span>
<span id="cb44-182"><a href="#cb44-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">'Dystopia (1.83) + residual'</span>, </span>
<span id="cb44-183"><a href="#cb44-183" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: GDP per capita'</span>,</span>
<span id="cb44-184"><a href="#cb44-184" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: Healthy life expectancy'</span>,</span>
<span id="cb44-185"><a href="#cb44-185" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: Freedom to make life choices'</span>,<span class="st">'Explained by: Social support'</span>,</span>
<span id="cb44-186"><a href="#cb44-186" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: Generosity'</span>,</span>
<span id="cb44-187"><a href="#cb44-187" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained by: Perceptions of corruption'</span>), <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, .))),</span>
<span id="cb44-188"><a href="#cb44-188" aria-hidden="true" tabindex="-1"></a>         <span class="fu">across</span>(<span class="sc">-</span>Country, as.numeric))</span>
<span id="cb44-189"><a href="#cb44-189" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> Happy_2022 <span class="sc">%&gt;%</span></span>
<span id="cb44-190"><a href="#cb44-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"Score"</span>, <span class="st">"Whisker-high"</span>, <span class="st">"Whisker-low"</span>), <span class="sc">~</span> . <span class="sc">/</span> <span class="dv">1000</span>))</span>
<span id="cb44-191"><a href="#cb44-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-192"><a href="#cb44-192" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-193"><a href="#cb44-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-194"><a href="#cb44-194" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-195"><a href="#cb44-195" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to rename multiple columns</span></span>
<span id="cb44-196"><a href="#cb44-196" aria-hidden="true" tabindex="-1"></a>rename_columns <span class="ot">&lt;-</span> <span class="cf">function</span>(df, old_names, new_names) {</span>
<span id="cb44-197"><a href="#cb44-197" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb44-198"><a href="#cb44-198" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_at</span>(<span class="fu">vars</span>(old_names), <span class="sc">~</span> new_names)</span>
<span id="cb44-199"><a href="#cb44-199" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-200"><a href="#cb44-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-201"><a href="#cb44-201" aria-hidden="true" tabindex="-1"></a><span class="co"># Define new names</span></span>
<span id="cb44-202"><a href="#cb44-202" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"GDP_per_Capita"</span>, <span class="st">"Family"</span>, <span class="st">"Life_Expectancy"</span>, <span class="st">"Freedom"</span>, </span>
<span id="cb44-203"><a href="#cb44-203" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Generosity"</span>, <span class="st">"Government_Corruption"</span>, <span class="st">"Dystopia_Residual"</span>)</span>
<span id="cb44-204"><a href="#cb44-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-205"><a href="#cb44-205" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to all dataframes</span></span>
<span id="cb44-206"><a href="#cb44-206" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2015, </span>
<span id="cb44-207"><a href="#cb44-207" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"Economy (GDP per Capita)"</span>, <span class="st">"Family"</span>, <span class="st">"Health (Life Expectancy)"</span>, </span>
<span id="cb44-208"><a href="#cb44-208" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom"</span>, <span class="st">"Generosity"</span>, <span class="st">"Trust (Government Corruption)"</span>, <span class="st">"Dystopia Residual"</span>), </span>
<span id="cb44-209"><a href="#cb44-209" aria-hidden="true" tabindex="-1"></a>                             new_names)</span>
<span id="cb44-210"><a href="#cb44-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-211"><a href="#cb44-211" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2016, </span>
<span id="cb44-212"><a href="#cb44-212" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"Economy (GDP per Capita)"</span>, <span class="st">"Family"</span>, <span class="st">"Health (Life Expectancy)"</span>, </span>
<span id="cb44-213"><a href="#cb44-213" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom"</span>, <span class="st">"Generosity"</span>, <span class="st">"Trust (Government Corruption)"</span>, <span class="st">"Dystopia Residual"</span>), </span>
<span id="cb44-214"><a href="#cb44-214" aria-hidden="true" tabindex="-1"></a>                             new_names)</span>
<span id="cb44-215"><a href="#cb44-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-216"><a href="#cb44-216" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2017, </span>
<span id="cb44-217"><a href="#cb44-217" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"Economy..GDP.per.Capita."</span>, <span class="st">"Family"</span>, <span class="st">"Health..Life.Expectancy."</span>, </span>
<span id="cb44-218"><a href="#cb44-218" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom"</span>, <span class="st">"Generosity"</span>, <span class="st">"Trust..Government.Corruption."</span>, <span class="st">"Dystopia.Residual"</span>), </span>
<span id="cb44-219"><a href="#cb44-219" aria-hidden="true" tabindex="-1"></a>                             new_names)</span>
<span id="cb44-220"><a href="#cb44-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-221"><a href="#cb44-221" aria-hidden="true" tabindex="-1"></a>Happy_2018 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2018, </span>
<span id="cb44-222"><a href="#cb44-222" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"GDP per capita"</span>, <span class="st">"Social support"</span>, <span class="st">"Healthy life expectancy"</span>, </span>
<span id="cb44-223"><a href="#cb44-223" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom to make life choices"</span>, <span class="st">"Generosity"</span>, <span class="st">"Perceptions of corruption"</span>), </span>
<span id="cb44-224"><a href="#cb44-224" aria-hidden="true" tabindex="-1"></a>                             new_names[<span class="sc">-</span><span class="fu">length</span>(new_names)])</span>
<span id="cb44-225"><a href="#cb44-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-226"><a href="#cb44-226" aria-hidden="true" tabindex="-1"></a>Happy_2019 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2019, </span>
<span id="cb44-227"><a href="#cb44-227" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">c</span>(<span class="st">"GDP per capita"</span>, <span class="st">"Social support"</span>, <span class="st">"Healthy life expectancy"</span>, </span>
<span id="cb44-228"><a href="#cb44-228" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Freedom to make life choices"</span>, <span class="st">"Generosity"</span>, <span class="st">"Perceptions of corruption"</span>), </span>
<span id="cb44-229"><a href="#cb44-229" aria-hidden="true" tabindex="-1"></a>                             new_names[<span class="sc">-</span><span class="fu">length</span>(new_names)])</span>
<span id="cb44-230"><a href="#cb44-230" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-231"><a href="#cb44-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-232"><a href="#cb44-232" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-233"><a href="#cb44-233" aria-hidden="true" tabindex="-1"></a>old_names_2020_to_2021 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Explained by: Log GDP per capita"</span>, </span>
<span id="cb44-234"><a href="#cb44-234" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Social support"</span>, </span>
<span id="cb44-235"><a href="#cb44-235" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Healthy life expectancy"</span>, </span>
<span id="cb44-236"><a href="#cb44-236" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Freedom to make life choices"</span>, </span>
<span id="cb44-237"><a href="#cb44-237" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Generosity"</span>, </span>
<span id="cb44-238"><a href="#cb44-238" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Explained by: Perceptions of corruption"</span>, </span>
<span id="cb44-239"><a href="#cb44-239" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Dystopia + residual"</span>)</span>
<span id="cb44-240"><a href="#cb44-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-241"><a href="#cb44-241" aria-hidden="true" tabindex="-1"></a>old_names_2022 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Explained by: GDP per capita"</span>, </span>
<span id="cb44-242"><a href="#cb44-242" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Social support"</span>, </span>
<span id="cb44-243"><a href="#cb44-243" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Healthy life expectancy"</span>, </span>
<span id="cb44-244"><a href="#cb44-244" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Freedom to make life choices"</span>, </span>
<span id="cb44-245"><a href="#cb44-245" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Generosity"</span>, </span>
<span id="cb44-246"><a href="#cb44-246" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Explained by: Perceptions of corruption"</span>, </span>
<span id="cb44-247"><a href="#cb44-247" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Dystopia (1.83) + residual"</span>)</span>
<span id="cb44-248"><a href="#cb44-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-249"><a href="#cb44-249" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to drop a column if it exists</span></span>
<span id="cb44-250"><a href="#cb44-250" aria-hidden="true" tabindex="-1"></a>drop_column_if_exists <span class="ot">&lt;-</span> <span class="cf">function</span>(df, column_name) {</span>
<span id="cb44-251"><a href="#cb44-251" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (column_name <span class="sc">%in%</span> <span class="fu">colnames</span>(df)) {</span>
<span id="cb44-252"><a href="#cb44-252" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>column_name)</span>
<span id="cb44-253"><a href="#cb44-253" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb44-254"><a href="#cb44-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb44-255"><a href="#cb44-255" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-256"><a href="#cb44-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-257"><a href="#cb44-257" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop original 'Generosity' column if it exists in Happy_2020 and Happy_2021 datasets</span></span>
<span id="cb44-258"><a href="#cb44-258" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">drop_column_if_exists</span>(Happy_2020, <span class="st">'Generosity'</span>)</span>
<span id="cb44-259"><a href="#cb44-259" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">drop_column_if_exists</span>(Happy_2021, <span class="st">'Generosity'</span>)</span>
<span id="cb44-260"><a href="#cb44-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-261"><a href="#cb44-261" aria-hidden="true" tabindex="-1"></a><span class="co"># Then proceed with the renaming process</span></span>
<span id="cb44-262"><a href="#cb44-262" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2020, old_names_2020_to_2021, new_names)</span>
<span id="cb44-263"><a href="#cb44-263" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2021, old_names_2020_to_2021, new_names)</span>
<span id="cb44-264"><a href="#cb44-264" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> <span class="fu">rename_columns</span>(Happy_2022, old_names_2022, new_names)</span>
<span id="cb44-265"><a href="#cb44-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-266"><a href="#cb44-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-267"><a href="#cb44-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-268"><a href="#cb44-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-269"><a href="#cb44-269" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-270"><a href="#cb44-270" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of datasets</span></span>
<span id="cb44-271"><a href="#cb44-271" aria-hidden="true" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> <span class="fu">list</span>(Happy_2015, Happy_2016, Happy_2017, Happy_2018, Happy_2019, Happy_2020, Happy_2021, Happy_2022)</span>
<span id="cb44-272"><a href="#cb44-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-273"><a href="#cb44-273" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply glimpse() function to each dataset in the list</span></span>
<span id="cb44-274"><a href="#cb44-274" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(datasets, head)</span>
<span id="cb44-275"><a href="#cb44-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-276"><a href="#cb44-276" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-277"><a href="#cb44-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-278"><a href="#cb44-278" aria-hidden="true" tabindex="-1"></a>In the data cleaning stage, I standardized the format of the datasets from 2015 to 2022. This was done to eliminate differences between the datasets and ensure consistent structure and variable names. This process has several benefits for subsequent data analysis.</span>
<span id="cb44-279"><a href="#cb44-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-280"><a href="#cb44-280" aria-hidden="true" tabindex="-1"></a>By standardizing the format of the datasets, I ensured that the data had consistent structure and variable names across different years. This makes the data easier to understand and compare, reducing confusion and errors that can arise from varying naming conventions and structures.</span>
<span id="cb44-281"><a href="#cb44-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-282"><a href="#cb44-282" aria-hidden="true" tabindex="-1"></a>Additionally, standardizing the format enhances reproducibility. Once the cleaning and renaming rules are defined, future datasets can be processed using the same rules, eliminating the need for repetitive work. This improves efficiency and reduces the likelihood of errors.</span>
<span id="cb44-283"><a href="#cb44-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-284"><a href="#cb44-284" aria-hidden="true" tabindex="-1"></a>Using consistent variable names improves readability. Descriptive and clear variable names make it easier for others to understand the content of the dataset and facilitate my own analysis and reporting in subsequent stages.</span>
<span id="cb44-285"><a href="#cb44-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-286"><a href="#cb44-286" aria-hidden="true" tabindex="-1"></a>Standardizing the format also benefits data analysis. Consistent data formats make it easier to aggregate, filter, visualize, and model the data across multiple years without the need for different processing steps for each dataset. This provides a more efficient and streamlined data analysis process.</span>
<span id="cb44-287"><a href="#cb44-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-288"><a href="#cb44-288" aria-hidden="true" tabindex="-1"></a>In conclusion, by standardizing the format of the datasets from 2015 to 2022, I ensured consistency, reproducibility, and readability of the data, while improving the efficiency and accuracy of data analysis. This establishes a solid foundation for subsequent data exploration, analysis, and interpretation.</span>
<span id="cb44-289"><a href="#cb44-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-290"><a href="#cb44-290" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Data Integration</span></span>
<span id="cb44-291"><a href="#cb44-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-292"><a href="#cb44-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,warning=FALSE}</span></span>
<span id="cb44-293"><a href="#cb44-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-294"><a href="#cb44-294" aria-hidden="true" tabindex="-1"></a>Happy_2015 <span class="ot">&lt;-</span> Happy_2015 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb44-295"><a href="#cb44-295" aria-hidden="true" tabindex="-1"></a>Happy_2016 <span class="ot">&lt;-</span> Happy_2016 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb44-296"><a href="#cb44-296" aria-hidden="true" tabindex="-1"></a>Happy_2017 <span class="ot">&lt;-</span> Happy_2017 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb44-297"><a href="#cb44-297" aria-hidden="true" tabindex="-1"></a>Happy_2018 <span class="ot">&lt;-</span> Happy_2018 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb44-298"><a href="#cb44-298" aria-hidden="true" tabindex="-1"></a>Happy_2019 <span class="ot">&lt;-</span> Happy_2019 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb44-299"><a href="#cb44-299" aria-hidden="true" tabindex="-1"></a>Happy_2020 <span class="ot">&lt;-</span> Happy_2020 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb44-300"><a href="#cb44-300" aria-hidden="true" tabindex="-1"></a>Happy_2021 <span class="ot">&lt;-</span> Happy_2021 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb44-301"><a href="#cb44-301" aria-hidden="true" tabindex="-1"></a>Happy_2022 <span class="ot">&lt;-</span> Happy_2022 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Government_Corruption =</span> <span class="fu">as.numeric</span>(Government_Corruption))</span>
<span id="cb44-302"><a href="#cb44-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-303"><a href="#cb44-303" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-304"><a href="#cb44-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-307"><a href="#cb44-307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-308"><a href="#cb44-308" aria-hidden="true" tabindex="-1"></a>needed_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Year"</span>, <span class="st">"Score"</span>, <span class="st">"Rank"</span>, <span class="st">"GDP_per_Capita"</span>, <span class="st">"Family"</span>, </span>
<span id="cb44-309"><a href="#cb44-309" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Life_Expectancy"</span>, <span class="st">"Freedom"</span>, <span class="st">"Generosity"</span>, <span class="st">"Government_Corruption"</span></span>
<span id="cb44-310"><a href="#cb44-310" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb44-311"><a href="#cb44-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-312"><a href="#cb44-312" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to select a specific column</span></span>
<span id="cb44-313"><a href="#cb44-313" aria-hidden="true" tabindex="-1"></a>select_columns <span class="ot">&lt;-</span> <span class="cf">function</span>(df, columns) {</span>
<span id="cb44-314"><a href="#cb44-314" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(columns))</span>
<span id="cb44-315"><a href="#cb44-315" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-316"><a href="#cb44-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-317"><a href="#cb44-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-318"><a href="#cb44-318" aria-hidden="true" tabindex="-1"></a>Happy_2015_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2015, needed_columns)</span>
<span id="cb44-319"><a href="#cb44-319" aria-hidden="true" tabindex="-1"></a>Happy_2016_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2016, needed_columns)</span>
<span id="cb44-320"><a href="#cb44-320" aria-hidden="true" tabindex="-1"></a>Happy_2017_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2017, needed_columns)</span>
<span id="cb44-321"><a href="#cb44-321" aria-hidden="true" tabindex="-1"></a>Happy_2018_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2018, needed_columns)</span>
<span id="cb44-322"><a href="#cb44-322" aria-hidden="true" tabindex="-1"></a>Happy_2019_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2019, needed_columns)</span>
<span id="cb44-323"><a href="#cb44-323" aria-hidden="true" tabindex="-1"></a>Happy_2020_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2020, needed_columns)</span>
<span id="cb44-324"><a href="#cb44-324" aria-hidden="true" tabindex="-1"></a>Happy_2021_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2021, needed_columns)</span>
<span id="cb44-325"><a href="#cb44-325" aria-hidden="true" tabindex="-1"></a>Happy_2022_selected <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(Happy_2022, needed_columns)</span>
<span id="cb44-326"><a href="#cb44-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-327"><a href="#cb44-327" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, combine all the selected data boxes together</span></span>
<span id="cb44-328"><a href="#cb44-328" aria-hidden="true" tabindex="-1"></a>all_years_selected <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(Happy_2015_selected, Happy_2016_selected, Happy_2017_selected,</span>
<span id="cb44-329"><a href="#cb44-329" aria-hidden="true" tabindex="-1"></a>                                Happy_2018_selected, Happy_2019_selected, Happy_2020_selected,</span>
<span id="cb44-330"><a href="#cb44-330" aria-hidden="true" tabindex="-1"></a>                                Happy_2021_selected, Happy_2022_selected)</span>
<span id="cb44-331"><a href="#cb44-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-332"><a href="#cb44-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-333"><a href="#cb44-333" aria-hidden="true" tabindex="-1"></a>all_years_selected <span class="ot">&lt;-</span> all_years_selected <span class="sc">%&gt;%</span></span>
<span id="cb44-334"><a href="#cb44-334" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Rank =</span> <span class="fu">as.integer</span>(Rank))</span>
<span id="cb44-335"><a href="#cb44-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-336"><a href="#cb44-336" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove * from Country names</span></span>
<span id="cb44-337"><a href="#cb44-337" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">*"</span>, <span class="st">""</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb44-338"><a href="#cb44-338" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace 'Trinidad &amp; Tobago' with 'Trinidad and Tobago'</span></span>
<span id="cb44-339"><a href="#cb44-339" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Trinidad &amp; Tobago"</span>, <span class="st">"Trinidad and Tobago"</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb44-340"><a href="#cb44-340" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace 'Taiwan Province of China' with 'Taiwan'</span></span>
<span id="cb44-341"><a href="#cb44-341" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Taiwan Province of China"</span>, <span class="st">"Taiwan"</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb44-342"><a href="#cb44-342" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace 'Hong Kong S.A.R. of China' and 'Hong Kong S.A.R., China' with 'Hong Kong'</span></span>
<span id="cb44-343"><a href="#cb44-343" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Hong Kong S.A.R. of China"</span>, <span class="st">"Hong Kong"</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb44-344"><a href="#cb44-344" aria-hidden="true" tabindex="-1"></a>all_years_selected<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Hong Kong S.A.R., China"</span>, <span class="st">"Hong Kong"</span>, all_years_selected<span class="sc">$</span>Country)</span>
<span id="cb44-345"><a href="#cb44-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-346"><a href="#cb44-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-347"><a href="#cb44-347" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(all_years_selected)</span>
<span id="cb44-348"><a href="#cb44-348" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-349"><a href="#cb44-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-350"><a href="#cb44-350" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Data set visualization test</span></span>
<span id="cb44-351"><a href="#cb44-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-354"><a href="#cb44-354" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-355"><a href="#cb44-355" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for Japan</span></span>
<span id="cb44-356"><a href="#cb44-356" aria-hidden="true" tabindex="-1"></a>japan_data <span class="ot">&lt;-</span> all_years_selected <span class="sc">%&gt;%</span></span>
<span id="cb44-357"><a href="#cb44-357" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Japan"</span>)</span>
<span id="cb44-358"><a href="#cb44-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-359"><a href="#cb44-359" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot rank over time</span></span>
<span id="cb44-360"><a href="#cb44-360" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb44-361"><a href="#cb44-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-362"><a href="#cb44-362" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(japan_data, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Rank)) <span class="sc">+</span></span>
<span id="cb44-363"><a href="#cb44-363" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb44-364"><a href="#cb44-364" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb44-365"><a href="#cb44-365" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb44-366"><a href="#cb44-366" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Ranking of Japan from 2015 to 2022"</span>) <span class="sc">+</span></span>
<span id="cb44-367"><a href="#cb44-367" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb44-368"><a href="#cb44-368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Rank"</span>) <span class="sc">+</span></span>
<span id="cb44-369"><a href="#cb44-369" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>() <span class="co"># Reverse the y axis as rank 1 is the highest</span></span>
<span id="cb44-370"><a href="#cb44-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-371"><a href="#cb44-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-372"><a href="#cb44-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-373"><a href="#cb44-373" aria-hidden="true" tabindex="-1"></a><span class="fu">### For this dataset the research questions</span></span>
<span id="cb44-374"><a href="#cb44-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-375"><a href="#cb44-375" aria-hidden="true" tabindex="-1"></a>The World Happiness Report's dataset offers a wealth of information that can help address numerous research questions related to national happiness levels and the factors that influence them. Here's a more detailed look at the potential research questions mentioned:</span>
<span id="cb44-376"><a href="#cb44-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-377"><a href="#cb44-377" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Which factors most significantly influence a country's happiness?** This question seeks to determine the primary drivers of happiness on a national scale. Are economic factors like GDP per capita more influential, or do social factors such as social support and freedom to make life choices hold more weight? Additionally, to what extent does a nation's perception of corruption impact the overall happiness? Analyzing correlations and conducting regression analysis could shed light on these relationships.</span>
<span id="cb44-378"><a href="#cb44-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-379"><a href="#cb44-379" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**How does happiness differ among countries?** This question explores the disparities in happiness levels across various nations. Which countries consistently rank at the top, and which ones at the bottom? Are there discernible patterns geographically, economically, or culturally? Comparing and analyzing the happiness scores and their respective factors across different countries can provide insights.</span>
<span id="cb44-380"><a href="#cb44-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-381"><a href="#cb44-381" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**How do various factors and overall happiness evolve over time?** This question addresses the temporal dynamics of happiness and its influencing factors. Are there trends showing that certain factors become more or less influential over time? Does the overall happiness level of countries or the world at large rise, fall, or remain stable? Time series analysis could be useful in this context.</span>
<span id="cb44-382"><a href="#cb44-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-383"><a href="#cb44-383" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**How does a specific factor impact happiness?** This question focuses on the relationship between a single factor and happiness. For instance, how does a rise in GDP per capita or a decrease in perceived corruption affect the happiness score? Understanding this can help pinpoint what initiatives might be most effective in increasing a country's happiness. Conducting detailed analysis for individual factors and their impact on the happiness score would be required to address this question.</span>
<span id="cb44-384"><a href="#cb44-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-385"><a href="#cb44-385" aria-hidden="true" tabindex="-1"></a>By meticulously examining these questions using the dataset, researchers can gain valuable insights into the complex dynamics of happiness, potentially guiding policy decisions and initiatives aimed at enhancing national well-being.</span>
<span id="cb44-386"><a href="#cb44-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-387"><a href="#cb44-387" aria-hidden="true" tabindex="-1"></a><span class="fu">## HW3</span></span>
<span id="cb44-388"><a href="#cb44-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-389"><a href="#cb44-389" aria-hidden="true" tabindex="-1"></a>In Homework 2, I carried out several critical tasks related to data preparation, analysis, and visualization. Here's a summary:</span>
<span id="cb44-390"><a href="#cb44-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-391"><a href="#cb44-391" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Data Cleaning**: Firstly, I standardized multiple datasets spanning from 2015 to 2022. This process involved converting the <span class="in">`Government_Corruption`</span> variable into a numeric format for all the years. This step ensured that the data across all years was consistent and comparable.</span>
<span id="cb44-392"><a href="#cb44-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-393"><a href="#cb44-393" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Data Integration**: After cleaning the data, I selected a specific set of columns from all the datasets that I deemed necessary for my analysis. This included variables such as "Country", "Year", "Score", "Rank", "GDP_per_Capita", "Family", "Life_Expectancy", "Freedom", "Generosity", and "Government_Corruption". I then amalgamated all these selected data subsets from the different years into one unified dataset for further analysis.</span>
<span id="cb44-394"><a href="#cb44-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-395"><a href="#cb44-395" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Data Visualization**: I then conducted a preliminary visualization using ggplot2 to test the dataset. In this step, I filtered the data for Japan and graphed its ranking over time from 2015 to 2022.</span>
<span id="cb44-396"><a href="#cb44-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-397"><a href="#cb44-397" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Research Questions**: I proposed several research questions concerning national happiness levels and their influencing factors. These questions aimed to explore which factors most significantly influence a country's happiness, how happiness varies among countries, how various factors and overall happiness evolve over time, and how a specific factor impacts happiness.</span>
<span id="cb44-398"><a href="#cb44-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-399"><a href="#cb44-399" aria-hidden="true" tabindex="-1"></a>By accomplishing these tasks, I prepared the dataset for an in-depth exploratory data analysis in Homework 3. The integrated and clean dataset, along with the established research questions, provides a solid foundation for further analysis and interpretation.</span>
<span id="cb44-400"><a href="#cb44-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-401"><a href="#cb44-401" aria-hidden="true" tabindex="-1"></a><span class="fu">### Descriptive Statistics</span></span>
<span id="cb44-402"><a href="#cb44-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-405"><a href="#cb44-405" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-406"><a href="#cb44-406" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to compute descriptive statistics</span></span>
<span id="cb44-407"><a href="#cb44-407" aria-hidden="true" tabindex="-1"></a>compute_descriptive_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var_name) {</span>
<span id="cb44-408"><a href="#cb44-408" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(var_name) <span class="co"># turn the variable name into a symbol</span></span>
<span id="cb44-409"><a href="#cb44-409" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-410"><a href="#cb44-410" aria-hidden="true" tabindex="-1"></a>  stats <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(</span>
<span id="cb44-411"><a href="#cb44-411" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-412"><a href="#cb44-412" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-413"><a href="#cb44-413" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-414"><a href="#cb44-414" aria-hidden="true" tabindex="-1"></a>    <span class="at">min =</span> <span class="fu">min</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-415"><a href="#cb44-415" aria-hidden="true" tabindex="-1"></a>    <span class="at">max =</span> <span class="fu">max</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-416"><a href="#cb44-416" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-417"><a href="#cb44-417" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-418"><a href="#cb44-418" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(stats)</span>
<span id="cb44-419"><a href="#cb44-419" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-420"><a href="#cb44-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-421"><a href="#cb44-421" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the function for the variables</span></span>
<span id="cb44-422"><a href="#cb44-422" aria-hidden="true" tabindex="-1"></a>score_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Score)</span>
<span id="cb44-423"><a href="#cb44-423" aria-hidden="true" tabindex="-1"></a>gdp_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, GDP_per_Capita)</span>
<span id="cb44-424"><a href="#cb44-424" aria-hidden="true" tabindex="-1"></a>family_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Family)</span>
<span id="cb44-425"><a href="#cb44-425" aria-hidden="true" tabindex="-1"></a>life_expectancy_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Life_Expectancy)</span>
<span id="cb44-426"><a href="#cb44-426" aria-hidden="true" tabindex="-1"></a>freedom_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Freedom)</span>
<span id="cb44-427"><a href="#cb44-427" aria-hidden="true" tabindex="-1"></a>generosity_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Generosity)</span>
<span id="cb44-428"><a href="#cb44-428" aria-hidden="true" tabindex="-1"></a>gov_corruption_stats <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats</span>(all_years_selected, Government_Corruption)</span>
<span id="cb44-429"><a href="#cb44-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-430"><a href="#cb44-430" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the results</span></span>
<span id="cb44-431"><a href="#cb44-431" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_stats)</span>
<span id="cb44-432"><a href="#cb44-432" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gdp_stats)</span>
<span id="cb44-433"><a href="#cb44-433" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(family_stats)</span>
<span id="cb44-434"><a href="#cb44-434" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(life_expectancy_stats)</span>
<span id="cb44-435"><a href="#cb44-435" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(freedom_stats)</span>
<span id="cb44-436"><a href="#cb44-436" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(generosity_stats)</span>
<span id="cb44-437"><a href="#cb44-437" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gov_corruption_stats)</span>
<span id="cb44-438"><a href="#cb44-438" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-439"><a href="#cb44-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-440"><a href="#cb44-440" aria-hidden="true" tabindex="-1"></a>In this code, I define a function called <span class="in">`compute_descriptive_stats`</span> to streamline the process of calculating descriptive statistics for any given variable in my dataset. I convert the input variable name to a symbol using <span class="in">`enquo`</span>, allowing me to use it within the <span class="in">`dplyr::summarise`</span> function to compute the mean, median, standard deviation, and minimum and maximum values.</span>
<span id="cb44-441"><a href="#cb44-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-442"><a href="#cb44-442" aria-hidden="true" tabindex="-1"></a>I then apply this function to each of the variables of interest in my <span class="in">`all_years_selected`</span> dataset - namely 'Score', 'GDP_per_Capita', 'Family', 'Life_Expectancy', 'Freedom', 'Generosity', and 'Government_Corruption'. The computed statistics for each variable are stored in their respective objects.</span>
<span id="cb44-443"><a href="#cb44-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-444"><a href="#cb44-444" aria-hidden="true" tabindex="-1"></a>Finally, I print out the results for each variable, providing me with a concise summary of their key statistical properties. This enables me to quickly understand the distribution and central tendencies of these important variables in my dataset.</span>
<span id="cb44-445"><a href="#cb44-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-448"><a href="#cb44-448" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-449"><a href="#cb44-449" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to compute descriptive statistics for each country</span></span>
<span id="cb44-450"><a href="#cb44-450" aria-hidden="true" tabindex="-1"></a>compute_descriptive_stats_by_country <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var_name) {</span>
<span id="cb44-451"><a href="#cb44-451" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(var_name) <span class="co"># turn the variable name into a symbol</span></span>
<span id="cb44-452"><a href="#cb44-452" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-453"><a href="#cb44-453" aria-hidden="true" tabindex="-1"></a>  stats <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb44-454"><a href="#cb44-454" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb44-455"><a href="#cb44-455" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb44-456"><a href="#cb44-456" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean =</span> <span class="fu">mean</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-457"><a href="#cb44-457" aria-hidden="true" tabindex="-1"></a>      <span class="at">median =</span> <span class="fu">median</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-458"><a href="#cb44-458" aria-hidden="true" tabindex="-1"></a>      <span class="at">sd =</span> <span class="fu">sd</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-459"><a href="#cb44-459" aria-hidden="true" tabindex="-1"></a>      <span class="at">min =</span> <span class="fu">min</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-460"><a href="#cb44-460" aria-hidden="true" tabindex="-1"></a>      <span class="at">max =</span> <span class="fu">max</span>(<span class="sc">!!</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-461"><a href="#cb44-461" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb44-462"><a href="#cb44-462" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-463"><a href="#cb44-463" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(stats)</span>
<span id="cb44-464"><a href="#cb44-464" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-465"><a href="#cb44-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-466"><a href="#cb44-466" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the function for the variables</span></span>
<span id="cb44-467"><a href="#cb44-467" aria-hidden="true" tabindex="-1"></a>score_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Score)</span>
<span id="cb44-468"><a href="#cb44-468" aria-hidden="true" tabindex="-1"></a>gdp_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, GDP_per_Capita)</span>
<span id="cb44-469"><a href="#cb44-469" aria-hidden="true" tabindex="-1"></a>family_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Family)</span>
<span id="cb44-470"><a href="#cb44-470" aria-hidden="true" tabindex="-1"></a>life_expectancy_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Life_Expectancy)</span>
<span id="cb44-471"><a href="#cb44-471" aria-hidden="true" tabindex="-1"></a>freedom_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Freedom)</span>
<span id="cb44-472"><a href="#cb44-472" aria-hidden="true" tabindex="-1"></a>generosity_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Generosity)</span>
<span id="cb44-473"><a href="#cb44-473" aria-hidden="true" tabindex="-1"></a>gov_corruption_stats_by_country <span class="ot">&lt;-</span> <span class="fu">compute_descriptive_stats_by_country</span>(all_years_selected, Government_Corruption)</span>
<span id="cb44-474"><a href="#cb44-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-475"><a href="#cb44-475" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the results</span></span>
<span id="cb44-476"><a href="#cb44-476" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_stats_by_country)</span>
<span id="cb44-477"><a href="#cb44-477" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gdp_stats_by_country)</span>
<span id="cb44-478"><a href="#cb44-478" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(family_stats_by_country)</span>
<span id="cb44-479"><a href="#cb44-479" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(life_expectancy_stats_by_country)</span>
<span id="cb44-480"><a href="#cb44-480" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(freedom_stats_by_country)</span>
<span id="cb44-481"><a href="#cb44-481" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(generosity_stats_by_country)</span>
<span id="cb44-482"><a href="#cb44-482" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gov_corruption_stats_by_country)</span>
<span id="cb44-483"><a href="#cb44-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-484"><a href="#cb44-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-485"><a href="#cb44-485" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-486"><a href="#cb44-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-487"><a href="#cb44-487" aria-hidden="true" tabindex="-1"></a>Grouping data by country before calculating the statistics will give me more detailed insights. It allows me to understand country-specific trends, make direct comparisons, prepare for further statistical testing, and create more informative visualizations. While the overall statistics provide a broad overview, the per-country statistics will enable me to dive deeper into the data, which will be immensely helpful for my further analysis.</span>
<span id="cb44-488"><a href="#cb44-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-491"><a href="#cb44-491" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-492"><a href="#cb44-492" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to compute frequency for categorical variables</span></span>
<span id="cb44-493"><a href="#cb44-493" aria-hidden="true" tabindex="-1"></a>compute_frequency <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var_name) {</span>
<span id="cb44-494"><a href="#cb44-494" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(var_name) <span class="co"># turn the variable name into a symbol</span></span>
<span id="cb44-495"><a href="#cb44-495" aria-hidden="true" tabindex="-1"></a>  var_str <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">as_name</span>(var) <span class="co"># convert the quosure to a string</span></span>
<span id="cb44-496"><a href="#cb44-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-497"><a href="#cb44-497" aria-hidden="true" tabindex="-1"></a>  freq <span class="ot">&lt;-</span> <span class="fu">table</span>(data[[var_str]])</span>
<span id="cb44-498"><a href="#cb44-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-499"><a href="#cb44-499" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(freq)</span>
<span id="cb44-500"><a href="#cb44-500" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-501"><a href="#cb44-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-502"><a href="#cb44-502" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the table to a data frame</span></span>
<span id="cb44-503"><a href="#cb44-503" aria-hidden="true" tabindex="-1"></a>country_freq_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(all_years_selected<span class="sc">$</span>Country))</span>
<span id="cb44-504"><a href="#cb44-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-505"><a href="#cb44-505" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the columns</span></span>
<span id="cb44-506"><a href="#cb44-506" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(country_freq_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb44-507"><a href="#cb44-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-508"><a href="#cb44-508" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the data frame</span></span>
<span id="cb44-509"><a href="#cb44-509" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(country_freq_df)</span>
<span id="cb44-510"><a href="#cb44-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-511"><a href="#cb44-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-512"><a href="#cb44-512" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-513"><a href="#cb44-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-514"><a href="#cb44-514" aria-hidden="true" tabindex="-1"></a>In this code, I define and apply a function <span class="in">`compute_frequency`</span> that calculates the frequency of each country in the <span class="in">`all_years_selected`</span> dataset. I start by converting the variable name into a symbol, then change it back into a string to access the column in the dataframe. I compute the frequency of each unique value in the specified column and store the result in <span class="in">`freq`</span>. After applying this function to the <span class="in">`Country`</span> column, I convert the resulting frequency table into a dataframe, name the columns as "Country" and "Frequency", and then print this dataframe. This process helps to get an overview of the country representation in the dataset.</span>
<span id="cb44-515"><a href="#cb44-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-518"><a href="#cb44-518" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-519"><a href="#cb44-519" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the data</span></span>
<span id="cb44-520"><a href="#cb44-520" aria-hidden="true" tabindex="-1"></a>countries_with_frequency_8 <span class="ot">&lt;-</span> country_freq_df <span class="sc">%&gt;%</span></span>
<span id="cb44-521"><a href="#cb44-521" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Frequency <span class="sc">==</span> <span class="dv">8</span>)</span>
<span id="cb44-522"><a href="#cb44-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-523"><a href="#cb44-523" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb44-524"><a href="#cb44-524" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(countries_with_frequency_8)</span>
<span id="cb44-525"><a href="#cb44-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-526"><a href="#cb44-526" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the original dataset</span></span>
<span id="cb44-527"><a href="#cb44-527" aria-hidden="true" tabindex="-1"></a>selected_countries_data <span class="ot">&lt;-</span> all_years_selected <span class="sc">%&gt;%</span></span>
<span id="cb44-528"><a href="#cb44-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> countries_with_frequency_8<span class="sc">$</span>Country)</span>
<span id="cb44-529"><a href="#cb44-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-530"><a href="#cb44-530" aria-hidden="true" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb44-531"><a href="#cb44-531" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(selected_countries_data)</span>
<span id="cb44-532"><a href="#cb44-532" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-533"><a href="#cb44-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-534"><a href="#cb44-534" aria-hidden="true" tabindex="-1"></a>In this code snippet, my goal was to filter the data from the original dataset all_years_selected to obtain records for those countries that have data for all eight years.</span>
<span id="cb44-535"><a href="#cb44-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-536"><a href="#cb44-536" aria-hidden="true" tabindex="-1"></a>Firstly, I filtered rows from the country_freq_df data frame where Frequency is equal to 8, meaning those countries that appear in the dataset 8 times, and stored these country names in countries_with_frequency_8.</span>
<span id="cb44-537"><a href="#cb44-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-538"><a href="#cb44-538" aria-hidden="true" tabindex="-1"></a>Next, I printed out countries_with_frequency_8 to see which countries have data for all 8 years.</span>
<span id="cb44-539"><a href="#cb44-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-540"><a href="#cb44-540" aria-hidden="true" tabindex="-1"></a>Then, I applied the filtering function again, but this time on the all_years_selected dataset, to select all rows for countries that are in the countries_with_frequency_8 list.</span>
<span id="cb44-541"><a href="#cb44-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-542"><a href="#cb44-542" aria-hidden="true" tabindex="-1"></a>Finally, I printed the filtered data selected_countries_data, thus obtaining all data for those countries that have records for all eight years.</span>
<span id="cb44-543"><a href="#cb44-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-544"><a href="#cb44-544" aria-hidden="true" tabindex="-1"></a>This process allowed me to acquire a more accurate and comprehensive dataset, providing a solid foundation for further analysis.</span>
<span id="cb44-545"><a href="#cb44-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-546"><a href="#cb44-546" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualizations using ggplot2</span></span>
<span id="cb44-547"><a href="#cb44-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-548"><a href="#cb44-548" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,results = 'hide'}</span></span>
<span id="cb44-549"><a href="#cb44-549" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the unique countries in selected_countries_data</span></span>
<span id="cb44-550"><a href="#cb44-550" aria-hidden="true" tabindex="-1"></a>unique_countries <span class="ot">&lt;-</span> <span class="fu">unique</span>(selected_countries_data<span class="sc">$</span>Country)</span>
<span id="cb44-551"><a href="#cb44-551" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(unique_countries)</span>
<span id="cb44-552"><a href="#cb44-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-553"><a href="#cb44-553" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-554"><a href="#cb44-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-557"><a href="#cb44-557" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-558"><a href="#cb44-558" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the continent based on the country</span></span>
<span id="cb44-559"><a href="#cb44-559" aria-hidden="true" tabindex="-1"></a>selected_countries_data <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span> </span>
<span id="cb44-560"><a href="#cb44-560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Continent =</span> <span class="fu">case_when</span>(</span>
<span id="cb44-561"><a href="#cb44-561" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Canada"</span>, <span class="st">"United States"</span>, <span class="st">"Mexico"</span>) <span class="sc">~</span> <span class="st">"North America"</span>,</span>
<span id="cb44-562"><a href="#cb44-562" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Costa Rica"</span>, <span class="st">"Panama"</span>, <span class="st">"Guatemala"</span>, <span class="st">"El Salvador"</span>, <span class="st">"Honduras"</span>, <span class="st">"Nicaragua"</span>, <span class="st">"Dominican Republic"</span>,<span class="st">"Jamaica"</span>) <span class="sc">~</span> <span class="st">"Central America"</span>,</span>
<span id="cb44-563"><a href="#cb44-563" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Brazil"</span>, <span class="st">"Venezuela"</span>, <span class="st">"Chile"</span>, <span class="st">"Argentina"</span>, <span class="st">"Uruguay"</span>, <span class="st">"Colombia"</span>, <span class="st">"Ecuador"</span>, <span class="st">"Bolivia"</span>, <span class="st">"Paraguay"</span>, <span class="st">"Peru"</span>) <span class="sc">~</span> <span class="st">"South America"</span>,</span>
<span id="cb44-564"><a href="#cb44-564" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Switzerland"</span>, <span class="st">"Iceland"</span>, <span class="st">"Denmark"</span>, <span class="st">"Norway"</span>, <span class="st">"Finland"</span>, <span class="st">"Netherlands"</span>, <span class="st">"Sweden"</span>, <span class="st">"Austria"</span>, <span class="st">"Luxembourg"</span>, <span class="st">"Ireland"</span>, <span class="st">"Belgium"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"Germany"</span>, <span class="st">"France"</span>, <span class="st">"Spain"</span>, <span class="st">"Malta"</span>, <span class="st">"Italy"</span>, <span class="st">"Moldova"</span>, <span class="st">"Slovakia"</span>, <span class="st">"Slovenia"</span>, <span class="st">"Lithuania"</span>, <span class="st">"Belarus"</span>, <span class="st">"Poland"</span>, <span class="st">"Croatia"</span>, <span class="st">"Russia"</span>, <span class="st">"Cyprus"</span>, <span class="st">"Kosovo"</span>, <span class="st">"Estonia"</span>, <span class="st">"Latvia"</span>, <span class="st">"Albania"</span>, <span class="st">"Bosnia and Herzegovina"</span>, <span class="st">"Greece"</span>, <span class="st">"Hungary"</span>, <span class="st">"Portugal"</span>, <span class="st">"Romania"</span>, <span class="st">"Serbia"</span>, <span class="st">"Bulgaria"</span>, <span class="st">"Ukraine"</span>, <span class="st">"Armenia"</span>, <span class="st">"Georgia"</span>,<span class="st">"Montenegro"</span>) <span class="sc">~</span> <span class="st">"Europe"</span>,</span>
<span id="cb44-565"><a href="#cb44-565" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Israel"</span>, <span class="st">"United Arab Emirates"</span>, <span class="st">"Saudi Arabia"</span>, <span class="st">"Kuwait"</span>, <span class="st">"Bahrain"</span>, <span class="st">"Jordan"</span>, <span class="st">"Lebanon"</span>, <span class="st">"Iran"</span>, <span class="st">"Iraq"</span>) <span class="sc">~</span> <span class="st">"Middle East"</span>,</span>
<span id="cb44-566"><a href="#cb44-566" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"New Zealand"</span>, <span class="st">"Australia"</span>, <span class="st">"Singapore"</span>, <span class="st">"Japan"</span>, <span class="st">"South Korea"</span>, <span class="st">"Taiwan"</span>, <span class="st">"Uzbekistan"</span>, <span class="st">"Malaysia"</span>, <span class="st">"Thailand"</span>, <span class="st">"Vietnam"</span>, <span class="st">"Indonesia"</span>, <span class="st">"Hong Kong"</span>, <span class="st">"China"</span>, <span class="st">"Kazakhstan"</span>, <span class="st">"Pakistan"</span>, <span class="st">"Turkmenistan"</span>, <span class="st">"Azerbaijan"</span>, <span class="st">"Philippines"</span>, <span class="st">"India"</span>, <span class="st">"Mongolia"</span>, <span class="st">"Bangladesh"</span>, <span class="st">"Nepal"</span>, <span class="st">"Myanmar"</span>, <span class="st">"Cambodia"</span>, <span class="st">"Sri Lanka"</span>,<span class="st">"Kyrgyzstan"</span>,<span class="st">"Tajikistan"</span>,<span class="st">"Yemen"</span>,<span class="st">"Afghanistan"</span>,<span class="st">"Turkey"</span>) <span class="sc">~</span> <span class="st">"Asia"</span>,</span>
<span id="cb44-567"><a href="#cb44-567" aria-hidden="true" tabindex="-1"></a>    Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Mauritius"</span>, <span class="st">"Libya"</span>, <span class="st">"Algeria"</span>, <span class="st">"Nigeria"</span>, <span class="st">"Morocco"</span>, <span class="st">"Zimbabwe"</span>, <span class="st">"Ghana"</span>, <span class="st">"Zambia"</span>, <span class="st">"Kenya"</span>, <span class="st">"Egypt"</span>, <span class="st">"South Africa"</span>, <span class="st">"Ethiopia"</span>, <span class="st">"Sierra Leone"</span>, <span class="st">"Cameroon"</span>, <span class="st">"Malawi"</span>, <span class="st">"Gabon"</span>, <span class="st">"Senegal"</span>, <span class="st">"Niger"</span>, <span class="st">"Uganda"</span>, <span class="st">"Liberia"</span>, <span class="st">"Tanzania"</span>, <span class="st">"Madagascar"</span>, <span class="st">"Guinea"</span>, <span class="st">"Ivory Coast"</span>, <span class="st">"Burkina Faso"</span>, <span class="st">"Benin"</span>, <span class="st">"Mali"</span>, <span class="st">"Chad"</span>, <span class="st">"Rwanda"</span>, <span class="st">"Togo"</span>,<span class="st">"Tunisia"</span>,<span class="st">"Mauritania"</span>,<span class="st">"Botswana"</span>,<span class="st">"Palestinian Territories"</span>) <span class="sc">~</span> <span class="st">"Africa"</span>,</span>
<span id="cb44-568"><a href="#cb44-568" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span>  <span class="co"># Default value for countries not listed</span></span>
<span id="cb44-569"><a href="#cb44-569" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb44-570"><a href="#cb44-570" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(selected_countries_data)</span>
<span id="cb44-571"><a href="#cb44-571" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-572"><a href="#cb44-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-573"><a href="#cb44-573" aria-hidden="true" tabindex="-1"></a>The first code snippet prints all the unique countries from the <span class="in">`selected_countries_data`</span> dataframe. The <span class="in">`unique()`</span> function identifies all unique elements from the given vector (in this case, the 'Country' column). The <span class="in">`print`</span> function then prints these unique countries.</span>
<span id="cb44-574"><a href="#cb44-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-575"><a href="#cb44-575" aria-hidden="true" tabindex="-1"></a>The second snippet creates a new column named 'Continent' in the <span class="in">`selected_countries_data`</span> dataframe. The <span class="in">`mutate()`</span> function adds or modifies columns in a dataframe, and the <span class="in">`case_when()`</span> function assigns each country to a continent based on a set of conditions. If a country does not fit any condition, it is classified as 'Other'. The <span class="in">`head()`</span> function is then used to view the first few rows of the dataframe to ensure that the 'Continent' column has been added correctly.</span>
<span id="cb44-576"><a href="#cb44-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-579"><a href="#cb44-579" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-580"><a href="#cb44-580" aria-hidden="true" tabindex="-1"></a>selected_countries_data <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span> </span>
<span id="cb44-581"><a href="#cb44-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-582"><a href="#cb44-582" aria-hidden="true" tabindex="-1"></a>    <span class="at">Developed =</span> <span class="fu">case_when</span>(</span>
<span id="cb44-583"><a href="#cb44-583" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb44-584"><a href="#cb44-584" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Canada"</span>, <span class="st">"United States"</span>,  <span class="co"># North America</span></span>
<span id="cb44-585"><a href="#cb44-585" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Switzerland"</span>, <span class="st">"Iceland"</span>, <span class="st">"Denmark"</span>, <span class="st">"Norway"</span>, <span class="st">"Finland"</span>, <span class="st">"Netherlands"</span>, <span class="st">"Sweden"</span>, <span class="st">"Austria"</span>, <span class="st">"Luxembourg"</span>, <span class="st">"Ireland"</span>, <span class="st">"Belgium"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"Germany"</span>, <span class="st">"France"</span>, <span class="st">"Spain"</span>, <span class="st">"Malta"</span>, <span class="st">"Italy"</span>,  <span class="co"># Europe</span></span>
<span id="cb44-586"><a href="#cb44-586" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Israel"</span>, <span class="st">"United Arab Emirates"</span>, <span class="st">"Saudi Arabia"</span>, <span class="st">"Kuwait"</span>, <span class="st">"Bahrain"</span>,  <span class="co"># Middle East</span></span>
<span id="cb44-587"><a href="#cb44-587" aria-hidden="true" tabindex="-1"></a>        <span class="st">"New Zealand"</span>, <span class="st">"Australia"</span>, <span class="st">"Singapore"</span>, <span class="st">"Japan"</span>, <span class="st">"South Korea"</span>, <span class="st">"Taiwan"</span>, <span class="st">"Hong Kong"</span>  <span class="co"># Asia</span></span>
<span id="cb44-588"><a href="#cb44-588" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">~</span> <span class="st">"Developed"</span>,</span>
<span id="cb44-589"><a href="#cb44-589" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Developing"</span>  <span class="co"># Default value for countries not listed</span></span>
<span id="cb44-590"><a href="#cb44-590" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb44-591"><a href="#cb44-591" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-592"><a href="#cb44-592" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(selected_countries_data )</span>
<span id="cb44-593"><a href="#cb44-593" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-594"><a href="#cb44-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-595"><a href="#cb44-595" aria-hidden="true" tabindex="-1"></a>In this block of code, I'm creating a new column named "Developed" in the data frame to label each country as developed or developing based on the definitions provided by **J. A. (2018, March 2) in "Developed and Developing Countries: World Bank Classification | Economics." **</span>
<span id="cb44-596"><a href="#cb44-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-597"><a href="#cb44-597" aria-hidden="true" tabindex="-1"></a>I have a list of countries which are defined as developed in that source. So, if a country is in my list, I label it as "Developed". For all other countries that are not in my list, I label them as "Developing". This classification is based on economic indicators and classifications commonly used by international organizations like the World Bank. </span>
<span id="cb44-598"><a href="#cb44-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-599"><a href="#cb44-599" aria-hidden="true" tabindex="-1"></a>Finally, I print out the first few rows of the data frame to inspect the changes I've made.</span>
<span id="cb44-600"><a href="#cb44-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-601"><a href="#cb44-601" aria-hidden="true" tabindex="-1"></a><span class="in">`GDP per Capita`</span></span>
<span id="cb44-604"><a href="#cb44-604" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-605"><a href="#cb44-605" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(selected_countries_data, <span class="fu">aes</span>(<span class="at">x =</span> GDP_per_Capita, <span class="at">y =</span> Score, <span class="at">colour =</span> Continent, <span class="at">shape =</span> Developed)) <span class="sc">+</span></span>
<span id="cb44-606"><a href="#cb44-606" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb44-607"><a href="#cb44-607" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"GDP per Capita"</span>, <span class="at">y =</span> <span class="st">"Happiness Score"</span>, <span class="at">title =</span> <span class="st">"Happiness Score vs GDP per Capita"</span>) <span class="sc">+</span></span>
<span id="cb44-608"><a href="#cb44-608" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Year)</span>
<span id="cb44-609"><a href="#cb44-609" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-610"><a href="#cb44-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-611"><a href="#cb44-611" aria-hidden="true" tabindex="-1"></a><span class="in">`Life Expectancy`</span></span>
<span id="cb44-614"><a href="#cb44-614" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-615"><a href="#cb44-615" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting Life_Expectancy against Score</span></span>
<span id="cb44-616"><a href="#cb44-616" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(selected_countries_data, <span class="fu">aes</span>(<span class="at">x =</span> Life_Expectancy, <span class="at">y =</span> Score, <span class="at">color =</span> Continent,<span class="at">shape =</span> Developed)) <span class="sc">+</span></span>
<span id="cb44-617"><a href="#cb44-617" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb44-618"><a href="#cb44-618" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Life Expectancy"</span>, <span class="at">y =</span> <span class="st">"Happiness Score"</span>, <span class="at">title =</span> <span class="st">"Happiness Score vs Life Expectancy"</span>)<span class="sc">+</span></span>
<span id="cb44-619"><a href="#cb44-619" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Year)</span>
<span id="cb44-620"><a href="#cb44-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-621"><a href="#cb44-621" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-622"><a href="#cb44-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-623"><a href="#cb44-623" aria-hidden="true" tabindex="-1"></a>These two chunks of code create scatter plots. The first one plots GDP per Capita against Happiness Score, and the second one plots Life Expectancy against Happiness Score. The data is split into facets for each year using <span class="in">`facet_wrap(~ Year)`</span>. The color of the points represents the continent (color = Continent), and the shape represents whether the country is developed (<span class="in">`shape = Developed`</span>). The <span class="in">`labs()`</span> function labels the axes and titles the plots. </span>
<span id="cb44-624"><a href="#cb44-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-625"><a href="#cb44-625" aria-hidden="true" tabindex="-1"></a><span class="in">`US_Data`</span></span>
<span id="cb44-626"><a href="#cb44-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-629"><a href="#cb44-629" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-630"><a href="#cb44-630" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming the rank column is named as 'Rank'</span></span>
<span id="cb44-631"><a href="#cb44-631" aria-hidden="true" tabindex="-1"></a>us_data <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb44-632"><a href="#cb44-632" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-633"><a href="#cb44-633" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, Score, GDP_per_Capita, Life_Expectancy, Generosity, Family, Freedom, Government_Corruption, Rank)</span>
<span id="cb44-634"><a href="#cb44-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-635"><a href="#cb44-635" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert data to long format</span></span>
<span id="cb44-636"><a href="#cb44-636" aria-hidden="true" tabindex="-1"></a>us_data_long <span class="ot">&lt;-</span> us_data <span class="sc">%&gt;%</span></span>
<span id="cb44-637"><a href="#cb44-637" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(Year, Score, Rank), <span class="at">names_to =</span> <span class="st">"Variable"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb44-638"><a href="#cb44-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-639"><a href="#cb44-639" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb44-640"><a href="#cb44-640" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(us_data_long, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Value, <span class="at">color =</span> Variable)) <span class="sc">+</span></span>
<span id="cb44-641"><a href="#cb44-641" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb44-642"><a href="#cb44-642" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Variable <span class="sc">~</span> ., <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb44-643"><a href="#cb44-643" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Value"</span>, <span class="at">title =</span> <span class="st">"Comparison of Variables and Rank Over Time in the United States"</span>)</span>
<span id="cb44-644"><a href="#cb44-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-645"><a href="#cb44-645" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding rank data</span></span>
<span id="cb44-646"><a href="#cb44-646" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(us_data, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Rank)) <span class="sc">+</span></span>
<span id="cb44-647"><a href="#cb44-647" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb44-648"><a href="#cb44-648" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Rank"</span>, <span class="at">title =</span> <span class="st">"Rank Over Time in the United States"</span>) <span class="sc">+</span></span>
<span id="cb44-649"><a href="#cb44-649" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>()  <span class="co"># Use this if a lower rank is better</span></span>
<span id="cb44-650"><a href="#cb44-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-651"><a href="#cb44-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-652"><a href="#cb44-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-653"><a href="#cb44-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-654"><a href="#cb44-654" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-655"><a href="#cb44-655" aria-hidden="true" tabindex="-1"></a>Firstly, I selected the U.S. data and variables of interest, including Year, Score, GDP_per_Capita, Life_Expectancy, Generosity, Family, Freedom, Government_Corruption, and Rank.</span>
<span id="cb44-656"><a href="#cb44-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-657"><a href="#cb44-657" aria-hidden="true" tabindex="-1"></a>Then, I reshaped the data from a wide to long format to facilitate plotting with ggplot. In this process, I kept the Year, Score, and Rank columns fixed, while reshaping other columns into a new 'Variable' column with corresponding values in a 'Value' column. This made it easier to plot multiple variables' changes on one graph.</span>
<span id="cb44-658"><a href="#cb44-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-659"><a href="#cb44-659" aria-hidden="true" tabindex="-1"></a>Next, I created a line plot with ggplot, with Year on the x-axis, values of variables on the y-axis, and different colors representing different variables. I used the <span class="in">`facet_grid`</span> function to split different variables into different panels, allowing each to have its own y-axis scale, as these variables could range greatly. Titles and axis labels were added for clarity.</span>
<span id="cb44-660"><a href="#cb44-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-661"><a href="#cb44-661" aria-hidden="true" tabindex="-1"></a>Finally, I created another line plot to specifically show the change in the U.S. rank over time. I used the <span class="in">`scale_y_reverse`</span> function to reverse the y-axis, as lower values (closer to 1) represent better ranks in this context.</span>
<span id="cb44-662"><a href="#cb44-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-663"><a href="#cb44-663" aria-hidden="true" tabindex="-1"></a>Through these plots, I could observe the changes in these variables for the U.S. and how these changes could influence its happiness ranking over time.</span>
<span id="cb44-664"><a href="#cb44-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-665"><a href="#cb44-665" aria-hidden="true" tabindex="-1"></a><span class="fu">### Grouping and summarizing</span></span>
<span id="cb44-666"><a href="#cb44-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-669"><a href="#cb44-669" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-670"><a href="#cb44-670" aria-hidden="true" tabindex="-1"></a>score_summary_by_country <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb44-671"><a href="#cb44-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb44-672"><a href="#cb44-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb44-673"><a href="#cb44-673" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb44-674"><a href="#cb44-674" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-675"><a href="#cb44-675" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_score =</span> <span class="fu">median</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-676"><a href="#cb44-676" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_score =</span> <span class="fu">min</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-677"><a href="#cb44-677" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_score =</span> <span class="fu">max</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-678"><a href="#cb44-678" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_score =</span> <span class="fu">sum</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-679"><a href="#cb44-679" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-680"><a href="#cb44-680" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_summary_by_country)</span>
<span id="cb44-681"><a href="#cb44-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-682"><a href="#cb44-682" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-683"><a href="#cb44-683" aria-hidden="true" tabindex="-1"></a>When summarizing the data, it provides a comprehensive understanding of the dataset, allowing us to view the data from various angles. In this script, I calculated the mean, median, minimum, maximum, and total happiness scores for each country. These summary statistics help us understand the trend in the happiness index across different years for each country.</span>
<span id="cb44-684"><a href="#cb44-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-685"><a href="#cb44-685" aria-hidden="true" tabindex="-1"></a>In addition, I counted the number of appearances for each country in the dataset, which can inform us about the volume of data available for analyzing each country. This is valuable for our subsequent analyses. If a country has very little data, we might need to be cautious about the results of its analysis, as a small amount of data might lead to increased uncertainty in the results.</span>
<span id="cb44-686"><a href="#cb44-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-687"><a href="#cb44-687" aria-hidden="true" tabindex="-1"></a>Overall, this code lays a thorough foundation for subsequent data analyses, aiding in more accurate and efficient analysis.</span>
<span id="cb44-688"><a href="#cb44-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-689"><a href="#cb44-689" aria-hidden="true" tabindex="-1"></a><span class="in">`Understanding trends`</span></span>
<span id="cb44-690"><a href="#cb44-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-693"><a href="#cb44-693" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-694"><a href="#cb44-694" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating mean score by country and year</span></span>
<span id="cb44-695"><a href="#cb44-695" aria-hidden="true" tabindex="-1"></a>score_trend <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb44-696"><a href="#cb44-696" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span></span>
<span id="cb44-697"><a href="#cb44-697" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_score =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb44-698"><a href="#cb44-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-699"><a href="#cb44-699" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_trend)</span>
<span id="cb44-700"><a href="#cb44-700" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-701"><a href="#cb44-701" aria-hidden="true" tabindex="-1"></a>Here, I am calculating the mean score of happiness for each country for every year in the dataset. This will help me understand how happiness trends have changed over time for each country.</span>
<span id="cb44-702"><a href="#cb44-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-703"><a href="#cb44-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-704"><a href="#cb44-704" aria-hidden="true" tabindex="-1"></a><span class="in">`Finding extremes`</span></span>
<span id="cb44-707"><a href="#cb44-707" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-708"><a href="#cb44-708" aria-hidden="true" tabindex="-1"></a><span class="co"># Finding the min and max score for each country</span></span>
<span id="cb44-709"><a href="#cb44-709" aria-hidden="true" tabindex="-1"></a>score_extremes <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb44-710"><a href="#cb44-710" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb44-711"><a href="#cb44-711" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min_score =</span> <span class="fu">min</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">max_score =</span> <span class="fu">max</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb44-712"><a href="#cb44-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-713"><a href="#cb44-713" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_extremes)</span>
<span id="cb44-714"><a href="#cb44-714" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-715"><a href="#cb44-715" aria-hidden="true" tabindex="-1"></a>In this code, I'm determining the minimum and maximum happiness scores for each country over the years in the dataset. This can highlight the best and worst years for each country in terms of happiness.</span>
<span id="cb44-716"><a href="#cb44-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-717"><a href="#cb44-717" aria-hidden="true" tabindex="-1"></a><span class="in">`Analyzing variable relationships`</span></span>
<span id="cb44-720"><a href="#cb44-720" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-721"><a href="#cb44-721" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating mean values of the variables</span></span>
<span id="cb44-722"><a href="#cb44-722" aria-hidden="true" tabindex="-1"></a>variable_means <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb44-723"><a href="#cb44-723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb44-724"><a href="#cb44-724" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb44-725"><a href="#cb44-725" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_score =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-726"><a href="#cb44-726" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_gdp =</span> <span class="fu">mean</span>(GDP_per_Capita, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-727"><a href="#cb44-727" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_life_expectancy =</span> <span class="fu">mean</span>(Life_Expectancy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-728"><a href="#cb44-728" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_generosity =</span> <span class="fu">mean</span>(Generosity, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-729"><a href="#cb44-729" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-730"><a href="#cb44-730" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(variable_means)</span>
<span id="cb44-731"><a href="#cb44-731" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-732"><a href="#cb44-732" aria-hidden="true" tabindex="-1"></a>With this code, I calculate the mean values of some variables like GDP per Capita, Life Expectancy, and Generosity for each country. This helps me to understand the average values of these factors, which can be helpful in identifying relationships between these variables and happiness scores.</span>
<span id="cb44-733"><a href="#cb44-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-734"><a href="#cb44-734" aria-hidden="true" tabindex="-1"></a><span class="in">`Analyzing distribution`</span></span>
<span id="cb44-737"><a href="#cb44-737" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-738"><a href="#cb44-738" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating quartiles of the happiness scores</span></span>
<span id="cb44-739"><a href="#cb44-739" aria-hidden="true" tabindex="-1"></a>score_distribution <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb44-740"><a href="#cb44-740" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb44-741"><a href="#cb44-741" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb44-742"><a href="#cb44-742" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1_score =</span> <span class="fu">quantile</span>(Score, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-743"><a href="#cb44-743" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_score =</span> <span class="fu">median</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb44-744"><a href="#cb44-744" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3_score =</span> <span class="fu">quantile</span>(Score, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-745"><a href="#cb44-745" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-746"><a href="#cb44-746" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(score_distribution)</span>
<span id="cb44-747"><a href="#cb44-747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-748"><a href="#cb44-748" aria-hidden="true" tabindex="-1"></a>Here, I calculate the first quartile (Q1), median, and third quartile (Q3) of the happiness scores for each country. These statistics can give a sense of the distribution of happiness scores within each country.</span>
<span id="cb44-749"><a href="#cb44-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-750"><a href="#cb44-750" aria-hidden="true" tabindex="-1"></a><span class="in">`Discovering patterns`</span></span>
<span id="cb44-753"><a href="#cb44-753" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-754"><a href="#cb44-754" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparing the mean scores of developed and developing countries</span></span>
<span id="cb44-755"><a href="#cb44-755" aria-hidden="true" tabindex="-1"></a>development_score_comparison <span class="ot">&lt;-</span> selected_countries_data <span class="sc">%&gt;%</span></span>
<span id="cb44-756"><a href="#cb44-756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Developed) <span class="sc">%&gt;%</span></span>
<span id="cb44-757"><a href="#cb44-757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_score =</span> <span class="fu">mean</span>(Score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb44-758"><a href="#cb44-758" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(development_score_comparison)</span>
<span id="cb44-759"><a href="#cb44-759" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-760"><a href="#cb44-760" aria-hidden="true" tabindex="-1"></a>Finally, in this code, I'm comparing the mean happiness scores of developed and developing countries. This can help identify patterns or differences in happiness based on the level of a country's development.</span>
<span id="cb44-761"><a href="#cb44-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-762"><a href="#cb44-762" aria-hidden="true" tabindex="-1"></a><span class="fu">### Limitations of  visualizations</span></span>
<span id="cb44-763"><a href="#cb44-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-764"><a href="#cb44-764" aria-hidden="true" tabindex="-1"></a>The limitations of my visualizations primarily lie in the following aspects:</span>
<span id="cb44-765"><a href="#cb44-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-766"><a href="#cb44-766" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Temporal dynamics: While my scatterplot shows the relationship between GDP per capita and happiness score, it does not reveal how this relationship changes over time. To improve this, I could create separate scatterplots for data from different years, or use color to distinguish different years in a single scatterplot.</span>
<span id="cb44-767"><a href="#cb44-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-768"><a href="#cb44-768" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Regional variations: Even though I used color to differentiate different continents, the detailed variations among continents or specific regions are not sufficiently revealed. For instance, I could create scatterplots for different continents, or visualize regional variations more intuitively by mapping the data onto a geographical map.</span>
<span id="cb44-769"><a href="#cb44-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-770"><a href="#cb44-770" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Interaction of multiple variables: While I took multiple variables into account, I did not delve into the interactions among these variables. For example, life expectancy might be associated with GDP per capita and could also be influenced by other variables. In future projects, I could explore these interactions by introducing interaction terms or creating more complex models.</span>
<span id="cb44-771"><a href="#cb44-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-772"><a href="#cb44-772" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Correlation and causation: While my visualizations show the relationships among variables, they cannot determine whether these relationships represent causal effects. In future projects, I might need more sophisticated statistical methods or experimental designs to explore potential causal relationships.</span>
<span id="cb44-773"><a href="#cb44-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-774"><a href="#cb44-774" aria-hidden="true" tabindex="-1"></a>These are all directions to consider and improve upon for the final project.</span>
<span id="cb44-775"><a href="#cb44-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-776"><a href="#cb44-776" aria-hidden="true" tabindex="-1"></a>**Reference**</span>
<span id="cb44-777"><a href="#cb44-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-778"><a href="#cb44-778" aria-hidden="true" tabindex="-1"></a>Sustainable Development Solutions Network. (2023). World Happiness Report. Worldhappiness.report. <span class="ot">&lt;https://worldhappiness.report/&gt;</span></span>
<span id="cb44-779"><a href="#cb44-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-780"><a href="#cb44-780" aria-hidden="true" tabindex="-1"></a>J, A. (2018, March 2). Developed and Developing Countries: World Bank Classification \| Economics. Economics Discussion. <span class="ot">&lt;https://www.economicsdiscussion.net/economic-development/developed-and-developing-countries-world-bank-classification-economics/30010&gt;</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>